(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ff2d83d"],{"05b1":function(t,e,i){"use strict";var r=i("9d79"),o=i("9cff"),n=i("9f5e"),s=i("0af5"),a=i("38f3"),h=i("256f"),c=i("40f5"),u={KVP:"KVP",REST:"REST"},p=u,l=i("a8d0"),_=i("c721"),g=function(t){this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style;var e=t.urls;void 0===e&&void 0!==t.url&&(e=o["a"].expandUrl(t.url)),this.requestEncoding_=void 0!==t.requestEncoding?t.requestEncoding:p.KVP;var i=this.requestEncoding_,r=t.tileGrid,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i==p.KVP&&a["a"].assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_});var s=this.dimensions_;this.createFromWMTSTemplate_=function(t){return t=i==p.KVP?_["a"].appendParams(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t})),function(e,o,n){if(e){var h={TileMatrix:r.getMatrixId(e[0]),TileCol:e[1],TileRow:-e[2]-1};a["a"].assign(h,s);var c=t;return c=i==p.KVP?_["a"].appendParams(c,h):c.replace(/\{(\w+?)\}/g,(function(t,e){return h[e]})),c}}};var h=e&&e.length>0?o["a"].createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate_)):o["a"].nullTileUrlFunction;c["a"].call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:h,urls:e,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition}),this.setKey(this.getKeyForDimensions_())};r["a"].inherits(g,c["a"]),g.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):o["a"].createFromTileUrlFunctions(t.map(this.createFromWMTSTemplate_.bind(this))),e)},g.prototype.getDimensions=function(){return this.dimensions_},g.prototype.getFormat=function(){return this.format_},g.prototype.getLayer=function(){return this.layer_},g.prototype.getMatrixSet=function(){return this.matrixSet_},g.prototype.getRequestEncoding=function(){return this.requestEncoding_},g.prototype.getStyle=function(){return this.style_},g.prototype.getVersion=function(){return this.version_},g.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},g.prototype.updateDimensions=function(t){a["a"].assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},g.optionsFromCapabilities=function(t,e){var i=t["Contents"]["Layer"],r=n["a"].find(i,(function(t,i,r){return t["Identifier"]==e["layer"]}));if(null===r)return null;var o,a,c,u=t["Contents"]["TileMatrixSet"];o=r["TileMatrixSetLink"].length>1?"projection"in e?n["a"].findIndex(r["TileMatrixSetLink"],(function(t,i,r){var o=n["a"].find(u,(function(e){return e["Identifier"]==t["TileMatrixSet"]})),s=o["SupportedCRS"],a=h["a"].get(s.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||h["a"].get(s),c=h["a"].get(e["projection"]);return a&&c?h["a"].equivalent(a,c):s==e["projection"]})):n["a"].findIndex(r["TileMatrixSetLink"],(function(t,i,r){return t["TileMatrixSet"]==e["matrixSet"]})):0,o<0&&(o=0),a=r["TileMatrixSetLink"][o]["TileMatrixSet"],c=r["TileMatrixSetLink"][o]["TileMatrixSetLimits"];var _=r["Format"][0];"format"in e&&(_=e["format"]),o=n["a"].findIndex(r["Style"],(function(t,i,r){return"style"in e?t["Title"]==e["style"]:t["isDefault"]})),o<0&&(o=0);var g=r["Style"][o]["Identifier"],f={};"Dimension"in r&&r["Dimension"].forEach((function(t,e,i){var r=t["Identifier"],o=t["Default"];void 0===o&&(o=t["Value"][0]),f[r]=o}));var m,d=t["Contents"]["TileMatrixSet"],y=n["a"].find(d,(function(t,e,i){return t["Identifier"]==a})),T=y["SupportedCRS"];if(T&&(m=h["a"].get(T.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||h["a"].get(T)),"projection"in e){var v=h["a"].get(e["projection"]);v&&(m&&!h["a"].equivalent(v,m)||(m=v))}var E,I,R=r["WGS84BoundingBox"];if(void 0!==R){var S=h["a"].get("EPSG:4326").getExtent();I=R[0]==S[0]&&R[2]==S[2],E=h["a"].transformExtent(R,"EPSG:4326",m);var x=m.getExtent();x&&(s["a"].containsExtent(x,E)||(E=void 0))}var O=l["a"].createFromCapabilitiesMatrixSet(y,E,c),P=[],L=e["requestEncoding"];if(L=void 0!==L?L:"","OperationsMetadata"in t&&"GetTile"in t["OperationsMetadata"])for(var A=t["OperationsMetadata"]["GetTile"]["DCP"]["HTTP"]["Get"],M=0,F=A.length;M<F;++M)if(A[M]["Constraint"]){var w=n["a"].find(A[M]["Constraint"],(function(t){return"GetEncoding"==t["name"]})),G=w["AllowedValues"]["Value"];if(""===L&&(L=G[0]),L!==p.KVP)break;n["a"].includes(G,p.KVP)&&P.push(A[M]["href"])}else A[M]["href"]&&(L=p.KVP,P.push(A[M]["href"]));return 0===P.length&&(L=p.REST,r["ResourceURL"].forEach((function(t){"tile"===t["resourceType"]&&(_=t["format"],P.push(t["template"]))}))),{urls:P,layer:e["layer"],matrixSet:a,format:_,projection:m,requestEncoding:L,tileGrid:O,style:g,dimensions:f,wrapX:I,crossOrigin:e["crossOrigin"]}};e["a"]=g},"0f62":function(t,e,i){"use strict";var r=i("9d79"),o=i("0258"),n=i("0511"),s=function(t){var e=t||{};n["a"].call(this,e),this.type=o["a"].IMAGE};r["a"].inherits(s,n["a"]),s.prototype.getSource,e["a"]=s},"115e":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("空间分析")]),e("el-breadcrumb-item",[t._v("缓冲区分析")])],1),e("el-card",[e("el-row",[e("el-col",{attrs:{span:10}},[e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入WKT"},model:{value:t.geom1,callback:function(e){t.geom1=e},expression:"geom1"}})],1),e("el-col",{attrs:{span:10}},[e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"显示结果"},model:{value:t.geom,callback:function(e){t.geom=e},expression:"geom"}})],1),e("el-col",{attrs:{span:4}},[e("el-input-number",{attrs:{min:0,label:"描述文字"},model:{value:t.distance,callback:function(e){t.distance=e},expression:"distance"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.analysis}},[t._v("提交")])],1)],1),e("div",{attrs:{id:"map"}})],1)],1)},o=[],n=i("c7eb"),s=i("1da1"),a=(i("d81d"),i("14d9"),i("92cf")),h=i("43df"),c=i("332e"),u=(i("082b"),i("d1cc"),i("4ca6"),i("0f62"),i("e671")),p=(i("a5cb"),i("97ab"),i("a8d0"),i("8956"),i("403d"),i("40f5"),i("24df"),i("bcb4"),i("05b1"),i("02df")),l=(i("169c"),i("76a3")),_=(i("14c4"),i("108b"),i("7269"),i("8d5e"),i("3e31"),i("3b3f"),i("3493"),i("7b56"),i("3110"),i("29ae"),i("256f")),g=(i("0af5"),i("21bc")),f=(i("715e"),{data:function(){return{geom1:"POLYGON((100.02715479879 32.168082192159,102.76873121104 37.194305614622,107.0334056301 34.909658604412,105.96723702534 30.949603786713,100.02715479879 32.168082192159))",distance:.5,geom:"",map:null,source:null}},created:function(){},mounted:function(){this.initMap()},methods:{initMap:function(){var t=new c["a"]({zoom:4,center:_["a"].fromLonLat([110,39])}),e=new p["a"]({features:[]}),i=new u["a"]({source:e,style:a["f"]}),r=new h["a"]({controls:g["a"].defaults({attribution:!1}).extend([]),target:"map",layers:[Object(a["d"])("vec_w"),Object(a["d"])("cva_w"),i],view:t});this.source=e,this.map=r},analysis:function(){var t=this;return Object(s["a"])(Object(n["a"])().mark((function e(){var i,r,o,s,a,h,c;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.source&&t.source.clear(),e.next=3,t.$API.buffAnalysis({geom:t.geom1,distance:t.distance});case 3:for(i=e.sent,r=i.data,r.success||(t.geom=r.msg),t.geom=r.data,o=[t.geom1,t.geom],s=[],a=new l["a"],h=0;h<o.length;h++)c=a.readFeature(o[h]),c.getGeometry().transform("EPSG:4326","EPSG:3857"),2===h&&c.set("index",h),s.push(c);t.source.addFeatures(s);case 12:case"end":return e.stop()}}),e)})))()}}}),m=f,d=(i("acf2"),i("2877")),y=Object(d["a"])(m,r,o,!1,null,null,null);e["default"]=y.exports},2350:function(t,e,i){"use strict";var r={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};e["a"]=r},"24df":function(t,e,i){"use strict";var r=i("9d79"),o=i("4e0a"),n=i("5bc0"),s=i("1e8d"),a=i("8fc0"),h=i("0af5"),c=function(t,e,i,r,s,a){o["a"].call(this,t,e,i,n["a"].IDLE),this.src_=r,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.imageListenerKeys_=null,this.state=n["a"].IDLE,this.imageLoadFunction_=a};r["a"].inherits(c,o["a"]),c.prototype.getImage=function(){return this.image_},c.prototype.handleImageError_=function(){this.state=n["a"].ERROR,this.unlistenImage_(),this.changed()},c.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=h["a"].getHeight(this.extent)/this.image_.height),this.state=n["a"].LOADED,this.unlistenImage_(),this.changed()},c.prototype.load=function(){this.state!=n["a"].IDLE&&this.state!=n["a"].ERROR||(this.state=n["a"].LOADING,this.changed(),this.imageListenerKeys_=[s["a"].listenOnce(this.image_,a["a"].ERROR,this.handleImageError_,this),s["a"].listenOnce(this.image_,a["a"].LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},c.prototype.setImage=function(t){this.image_=t},c.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s["a"].unlistenByKey),this.imageListenerKeys_=null};var u=c,p=i("92fa"),l=i("38f3"),_=i("256f"),g=i("3c81"),f=i("9f5e"),m=i("d60d"),d=i("c9f1"),y=function(t,e,i,s,a,c){this.targetProj_=e,this.maxSourceExtent_=t.getExtent();var u=e.getExtent(),p=u?h["a"].getIntersection(i,u):i,l=h["a"].getCenter(p),_=g["a"].calculateSourceResolution(t,e,l,s),f=r["a"].DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new d["a"](t,e,p,this.maxSourceExtent_,_*f),this.targetResolution_=s,this.targetExtent_=i;var m=this.triangulation_.calculateSourceExtent();this.sourceImage_=c(m,_,a),this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1,this.canvas_=null,this.sourceListenerKey_=null;var y=n["a"].LOADED;this.sourceImage_&&(y=n["a"].IDLE),o["a"].call(this,i,s,this.sourcePixelRatio_,y)};r["a"].inherits(y,o["a"]),y.prototype.disposeInternal=function(){this.state==n["a"].LOADING&&this.unlistenSource_(),o["a"].prototype.disposeInternal.call(this)},y.prototype.getImage=function(){return this.canvas_},y.prototype.getProjection=function(){return this.targetProj_},y.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==n["a"].LOADED){var e=h["a"].getWidth(this.targetExtent_)/this.targetResolution_,i=h["a"].getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=g["a"].render(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},y.prototype.load=function(){if(this.state==n["a"].IDLE){this.state=n["a"].LOADING,this.changed();var t=this.sourceImage_.getState();t==n["a"].LOADED||t==n["a"].ERROR?this.reproject_():(this.sourceListenerKey_=s["a"].listen(this.sourceImage_,a["a"].CHANGE,(function(t){var e=this.sourceImage_.getState();e!=n["a"].LOADED&&e!=n["a"].ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},y.prototype.unlistenSource_=function(){s["a"].unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null};var T=y,v=i("ef85"),E=function(t){v["a"].call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state}),this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0};r["a"].inherits(E,v["a"]),E.prototype.getResolutions=function(){return this.resolutions_},E.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=f["a"].linearFindNearest(this.resolutions_,t,0);t=this.resolutions_[e]}return t},E.prototype.getImage=function(t,e,i,o){var n=this.getProjection();if(r["a"].ENABLE_RASTER_REPROJECTION&&n&&o&&!_["a"].equivalent(n,o)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&_["a"].equivalent(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==e&&h["a"].equals(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new T(n,o,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,n)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return n&&(o=n),this.getImageInternal(t,e,i,o)},E.prototype.getImageInternal=function(t,e,i,r){},E.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case n["a"].LOADING:this.dispatchEvent(new E.Event(E.EventType_.IMAGELOADSTART,e));break;case n["a"].LOADED:this.dispatchEvent(new E.Event(E.EventType_.IMAGELOADEND,e));break;case n["a"].ERROR:this.dispatchEvent(new E.Event(E.EventType_.IMAGELOADERROR,e));break;default:}},E.defaultImageLoadFunction=function(t,e){t.getImage().src=e},E.Event=function(t,e){m["a"].call(this,t),this.image=e},r["a"].inherits(E.Event,m["a"]),E.EventType_={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};var I=E,R=i("2350"),S=i("b0c1"),x=i("c721"),O=function(t){var e=t||{};I.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:I.defaultImageLoadFunction,this.params_=e.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5};r["a"].inherits(O,I),O.GETFEATUREINFO_IMAGE_SIZE_=[101,101],O.prototype.getGetFeatureInfoUrl=function(t,e,i,o){if(void 0!==this.url_){var n=_["a"].get(i),s=this.getProjection();s&&s!==n&&(e=g["a"].calculateSourceResolution(s,n,t,e),t=_["a"].transform(t,n,s));var a=h["a"].getForViewAndSize(t,e,0,O.GETFEATUREINFO_IMAGE_SIZE_),c={SERVICE:"WMS",VERSION:r["a"].DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_["LAYERS"]};l["a"].assign(c,this.params_,o);var u=Math.floor((t[0]-a[0])/e),p=Math.floor((a[3]-t[1])/e);return c[this.v13_?"I":"X"]=u,c[this.v13_?"J":"Y"]=p,this.getRequestUrl_(a,O.GETFEATUREINFO_IMAGE_SIZE_,1,s||n,c)}},O.prototype.getParams=function(){return this.params_},O.prototype.getImageInternal=function(t,e,i,o){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var n=e/i,c=h["a"].getCenter(t),p=Math.ceil(h["a"].getWidth(t)/n),_=Math.ceil(h["a"].getHeight(t)/n),g=h["a"].getForViewAndSize(c,n,0,[p,_]),f=Math.ceil(this.ratio_*h["a"].getWidth(t)/n),m=Math.ceil(this.ratio_*h["a"].getHeight(t)/n),d=h["a"].getForViewAndSize(c,n,0,[f,m]),y=this.image_;if(y&&this.renderedRevision_==this.getRevision()&&y.getResolution()==e&&y.getPixelRatio()==i&&h["a"].containsExtent(y.getExtent(),g))return y;var T={SERVICE:"WMS",VERSION:r["a"].DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};l["a"].assign(T,this.params_),this.imageSize_[0]=Math.round(h["a"].getWidth(d)/n),this.imageSize_[1]=Math.round(h["a"].getHeight(d)/n);var v=this.getRequestUrl_(d,this.imageSize_,i,o,T);return this.image_=new u(d,e,i,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),s["a"].listen(this.image_,a["a"].CHANGE,this.handleImageChange,this),this.image_},O.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},O.prototype.getRequestUrl_=function(t,e,i,r,o){if(p["a"].assert(void 0!==this.url_,9),o[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(o["STYLES"]=""),1!=i)switch(this.serverType_){case R["a"].GEOSERVER:var n=90*i+.5|0;"FORMAT_OPTIONS"in o?o["FORMAT_OPTIONS"]+=";dpi:"+n:o["FORMAT_OPTIONS"]="dpi:"+n;break;case R["a"].MAPSERVER:o["MAP_RESOLUTION"]=90*i;break;case R["a"].CARMENTA_SERVER:case R["a"].QGIS:o["DPI"]=90*i;break;default:p["a"].assert(!1,8);break}o["WIDTH"]=e[0],o["HEIGHT"]=e[1];var s,a=r.getAxisOrientation();return s=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,o["BBOX"]=s.join(","),x["a"].appendParams(this.url_,o)},O.prototype.getUrl=function(){return this.url_},O.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},O.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},O.prototype.updateParams=function(t){l["a"].assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},O.prototype.updateV13_=function(){var t=this.params_["VERSION"]||r["a"].DEFAULT_WMS_VERSION;this.v13_=S["a"].compareVersions(t,"1.3")>=0};e["a"]=O},"3b3f":function(t,e,i){"use strict";var r=i("9d79"),o=i("5bc0"),n=i("92fa"),s=i("5c38"),a=i("1e8d"),h=i("8fc0"),c={FRACTION:"fraction",PIXELS:"pixels"},u=c,p=i("0999"),l=i("eacf"),_=i("15e0"),g=function(t,e,i,r,n,s){l["a"].call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==r&&(this.image_.crossOrigin=r),this.canvas_=s?document.createElement("CANVAS"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=n,this.size_=i,this.src_=e,this.tainting_=!1,this.imageState_==o["a"].LOADED&&this.determineTainting_()};r["a"].inherits(g,l["a"]),g.get=function(t,e,i,r,o,n){var s=_["a"].iconImageCache,a=s.get(e,r,n);return a||(a=new g(t,e,i,r,o,n),s.set(e,r,n,a)),a},g.prototype.determineTainting_=function(){var t=p["a"].createCanvasContext2D(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(e){this.tainting_=!0}},g.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(h["a"].CHANGE)},g.prototype.handleImageError_=function(){this.imageState_=o["a"].ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},g.prototype.handleImageLoad_=function(){this.imageState_=o["a"].LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},g.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},g.prototype.getImageState=function(){return this.imageState_},g.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){var e=this.size_[0],i=this.size_[1],r=p["a"].createCanvasContext2D(e,i);r.fillRect(0,0,e,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},g.prototype.getSize=function(){return this.size_},g.prototype.getSrc=function(){return this.src_},g.prototype.load=function(){if(this.imageState_==o["a"].IDLE){this.imageState_=o["a"].LOADING,this.imageListenerKeys_=[a["a"].listenOnce(this.image_,h["a"].ERROR,this.handleImageError_,this),a["a"].listenOnce(this.image_,h["a"].LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},g.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,r=this.color_[0]/255,o=this.color_[1]/255,n=this.color_[2]/255,s=0,a=i.length;s<a;s+=4)i[s]*=r,i[s+1]*=o,i[s+2]*=n;t.putImageData(e,0,0)}},g.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a["a"].unlistenByKey),this.imageListenerKeys_=null};var f=g,m={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},d=m,y=i("13a9"),T=function(t){var e=t||{};this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:d.TOP_LEFT,this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:u.FRACTION,this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:u.FRACTION,this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;var i=void 0!==e.img?e.img:null,a=void 0!==e.imgSize?e.imgSize:null,h=e.src;n["a"].assert(!(void 0!==h&&i),4),n["a"].assert(!i||i&&a,5),void 0!==h&&0!==h.length||!i||(h=i.src||r["a"].getUid(i).toString()),n["a"].assert(void 0!==h&&h.length>0,6);var c=void 0!==e.src?o["a"].IDLE:o["a"].LOADED;this.color_=void 0!==e.color?s["a"].asArray(e.color):null,this.iconImage_=f.get(i,h,a,this.crossOrigin_,c,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:d.TOP_LEFT,this.origin_=null,this.size_=void 0!==e.size?e.size:null;var p=void 0!==e.opacity?e.opacity:1,l=void 0!==e.rotateWithView&&e.rotateWithView,_=void 0!==e.rotation?e.rotation:0,g=void 0!==e.scale?e.scale:1,m=void 0===e.snapToPixel||e.snapToPixel;y["a"].call(this,{opacity:p,rotation:_,scale:g,snapToPixel:m,rotateWithView:l})};r["a"].inherits(T,y["a"]),T.prototype.clone=function(){return new T({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},T.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==u.FRACTION||this.anchorYUnits_==u.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==u.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==u.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=d.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=d.TOP_RIGHT&&this.anchorOrigin_!=d.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=d.BOTTOM_LEFT&&this.anchorOrigin_!=d.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},T.prototype.getColor=function(){return this.color_},T.prototype.getImage=function(t){return this.iconImage_.getImage(t)},T.prototype.getImageSize=function(){return this.iconImage_.getSize()},T.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},T.prototype.getImageState=function(){return this.iconImage_.getImageState()},T.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},T.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=d.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=d.TOP_RIGHT&&this.offsetOrigin_!=d.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=d.BOTTOM_LEFT&&this.offsetOrigin_!=d.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},T.prototype.getSrc=function(){return this.iconImage_.getSrc()},T.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},T.prototype.listenImageChange=function(t,e){return a["a"].listen(this.iconImage_,h["a"].CHANGE,t,e)},T.prototype.load=function(){this.iconImage_.load()},T.prototype.unlistenImageChange=function(t,e){a["a"].unlisten(this.iconImage_,h["a"].CHANGE,t,e)};e["a"]=T},"76a3":function(t,e,i){"use strict";var r=i("9d79"),o=i("082b"),n=i("8237"),s=i("4921"),a=function(){n["a"].call(this)};r["a"].inherits(a,n["a"]),a.prototype.getText_=function(t){return"string"===typeof t?t:""},a.prototype.getType=function(){return s["a"].TEXT},a.prototype.readFeature=function(t,e){return this.readFeatureFromText(this.getText_(t),this.adaptOptions(e))},a.prototype.readFeatureFromText=function(t,e){},a.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(this.getText_(t),this.adaptOptions(e))},a.prototype.readFeaturesFromText=function(t,e){},a.prototype.readGeometry=function(t,e){return this.readGeometryFromText(this.getText_(t),this.adaptOptions(e))},a.prototype.readGeometryFromText=function(t,e){},a.prototype.readProjection=function(t){return this.readProjectionFromText(this.getText_(t))},a.prototype.readProjectionFromText=function(t){return this.defaultDataProjection},a.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},a.prototype.writeFeatureText=function(t,e){},a.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},a.prototype.writeFeaturesText=function(t,e){},a.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},a.prototype.writeGeometryText=function(t,e){};var h=a,c=i("8a2e"),u=i("e526"),p=i("6a24"),l=i("12bd"),_=i("d5d3"),g=i("cdc1"),f=i("db9f"),m=i("d1cc"),d=i("09d8"),y=i("b208"),T=function(t){var e=t||{};h.call(this),this.splitCollection_=void 0!==e.splitCollection&&e.splitCollection};r["a"].inherits(T,h),T.EMPTY="EMPTY",T.Z="Z",T.M="M",T.ZM="ZM",T.encodePointGeometry_=function(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")},T.encodeMultiPointGeometry_=function(t){for(var e=[],i=t.getPoints(),r=0,o=i.length;r<o;++r)e.push("("+T.encodePointGeometry_(i[r])+")");return e.join(",")},T.encodeGeometryCollectionGeometry_=function(t){for(var e=[],i=t.getGeometries(),r=0,o=i.length;r<o;++r)e.push(T.encode_(i[r]));return e.join(",")},T.encodeLineStringGeometry_=function(t){for(var e=t.getCoordinates(),i=[],r=0,o=e.length;r<o;++r)i.push(e[r].join(" "));return i.join(",")},T.encodeMultiLineStringGeometry_=function(t){for(var e=[],i=t.getLineStrings(),r=0,o=i.length;r<o;++r)e.push("("+T.encodeLineStringGeometry_(i[r])+")");return e.join(",")},T.encodePolygonGeometry_=function(t){for(var e=[],i=t.getLinearRings(),r=0,o=i.length;r<o;++r)e.push("("+T.encodeLineStringGeometry_(i[r])+")");return e.join(",")},T.encodeMultiPolygonGeometry_=function(t){for(var e=[],i=t.getPolygons(),r=0,o=i.length;r<o;++r)e.push("("+T.encodePolygonGeometry_(i[r])+")");return e.join(",")},T.encodeGeometryLayout_=function(t){var e=t.getLayout(),i="";return e!==p["a"].XYZ&&e!==p["a"].XYZM||(i+=T.Z),e!==p["a"].XYM&&e!==p["a"].XYZM||(i+=T.M),i},T.encode_=function(t){var e=t.getType(),i=T.GeometryEncoder_[e],r=i(t);if(e=e.toUpperCase(),t instanceof y["a"]){var o=T.encodeGeometryLayout_(t);o.length>0&&(e+=" "+o)}return 0===r.length?e+" "+T.EMPTY:e+"("+r+")"},T.GeometryEncoder_={Point:T.encodePointGeometry_,LineString:T.encodeLineStringGeometry_,Polygon:T.encodePolygonGeometry_,MultiPoint:T.encodeMultiPointGeometry_,MultiLineString:T.encodeMultiLineStringGeometry_,MultiPolygon:T.encodeMultiPolygonGeometry_,GeometryCollection:T.encodeGeometryCollectionGeometry_},T.prototype.parse_=function(t){var e=new T.Lexer(t),i=new T.Parser(e);return i.parse()},T.prototype.readFeature,T.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);if(i){var r=new o["a"];return r.setGeometry(i),r}return null},T.prototype.readFeatures,T.prototype.readFeaturesFromText=function(t,e){var i=[],r=this.readGeometryFromText(t,e);i=this.splitCollection_&&r.getType()==u["a"].GEOMETRY_COLLECTION?r.getGeometriesArray():[r];for(var n,s=[],a=0,h=i.length;a<h;++a)n=new o["a"],n.setGeometry(i[a]),s.push(n);return s},T.prototype.readGeometry,T.prototype.readGeometryFromText=function(t,e){var i=this.parse_(t);return i?n["a"].transformWithOptions(i,!1,e):null},T.prototype.writeFeature,T.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):""},T.prototype.writeFeatures,T.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var i=[],r=0,o=t.length;r<o;++r)i.push(t[r].getGeometry());var n=new c["a"](i);return this.writeGeometryText(n,e)},T.prototype.writeGeometry,T.prototype.writeGeometryText=function(t,e){return T.encode_(n["a"].transformWithOptions(t,!0,e))},T.TokenType_={TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},T.Lexer=function(t){this.wkt=t,this.index_=-1},T.Lexer.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},T.Lexer.prototype.isNumeric_=function(t,e){var i=void 0!==e&&e;return t>="0"&&t<="9"||"."==t&&!i},T.Lexer.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},T.Lexer.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},T.Lexer.prototype.nextToken=function(){var t=this.nextChar_(),e={position:this.index_,value:t};if("("==t)e.type=T.TokenType_.LEFT_PAREN;else if(","==t)e.type=T.TokenType_.COMMA;else if(")"==t)e.type=T.TokenType_.RIGHT_PAREN;else if(this.isNumeric_(t)||"-"==t)e.type=T.TokenType_.NUMBER,e.value=this.readNumber_();else if(this.isAlpha_(t))e.type=T.TokenType_.TEXT,e.value=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e.type=T.TokenType_.EOF}return e},T.Lexer.prototype.readNumber_=function(){var t,e=this.index_,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},T.Lexer.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},T.Parser=function(t){this.lexer_=t,this.token_,this.layout_=p["a"].XY},T.Parser.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},T.Parser.prototype.isTokenType=function(t){var e=this.token_.type==t;return e},T.Parser.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},T.Parser.prototype.parse=function(){this.consume_();var t=this.parseGeometry_();return t},T.Parser.prototype.parseGeometryLayout_=function(){var t=p["a"].XY,e=this.token_;if(this.isTokenType(T.TokenType_.TEXT)){var i=e.value;i===T.Z?t=p["a"].XYZ:i===T.M?t=p["a"].XYM:i===T.ZM&&(t=p["a"].XYZM),t!==p["a"].XY&&this.consume_()}return t},T.Parser.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(T.TokenType_.TEXT)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),e==u["a"].GEOMETRY_COLLECTION.toUpperCase()){var i=this.parseGeometryCollectionText_();return new c["a"](i)}var r=T.Parser.GeometryParser_[e],o=T.Parser.GeometryConstructor_[e];if(!r||!o)throw new Error("Invalid geometry type: "+e);var n=r.call(this);return new o(n,this.layout_)}throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parseGeometryCollectionText_=function(){if(this.match(T.TokenType_.LEFT_PAREN)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(T.TokenType_.COMMA));if(this.match(T.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parsePointText_=function(){if(this.match(T.TokenType_.LEFT_PAREN)){var t=this.parsePoint_();if(this.match(T.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parseLineStringText_=function(){if(this.match(T.TokenType_.LEFT_PAREN)){var t=this.parsePointList_();if(this.match(T.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parsePolygonText_=function(){if(this.match(T.TokenType_.LEFT_PAREN)){var t=this.parseLineStringTextList_();if(this.match(T.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parseMultiPointText_=function(){var t;if(this.match(T.TokenType_.LEFT_PAREN)){if(t=this.token_.type==T.TokenType_.LEFT_PAREN?this.parsePointTextList_():this.parsePointList_(),this.match(T.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parseMultiLineStringText_=function(){if(this.match(T.TokenType_.LEFT_PAREN)){var t=this.parseLineStringTextList_();if(this.match(T.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parseMultiPolygonText_=function(){if(this.match(T.TokenType_.LEFT_PAREN)){var t=this.parsePolygonTextList_();if(this.match(T.TokenType_.RIGHT_PAREN))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var r=this.token_;if(!this.match(T.TokenType_.NUMBER))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},T.Parser.prototype.parsePointList_=function(){var t=[this.parsePoint_()];while(this.match(T.TokenType_.COMMA))t.push(this.parsePoint_());return t},T.Parser.prototype.parsePointTextList_=function(){var t=[this.parsePointText_()];while(this.match(T.TokenType_.COMMA))t.push(this.parsePointText_());return t},T.Parser.prototype.parseLineStringTextList_=function(){var t=[this.parseLineStringText_()];while(this.match(T.TokenType_.COMMA))t.push(this.parseLineStringText_());return t},T.Parser.prototype.parsePolygonTextList_=function(){var t=[this.parsePolygonText_()];while(this.match(T.TokenType_.COMMA))t.push(this.parsePolygonText_());return t},T.Parser.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(T.TokenType_.TEXT)&&this.token_.value==T.EMPTY;return t&&this.consume_(),t},T.Parser.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},T.Parser.GeometryConstructor_={POINT:m["a"],LINESTRING:l["a"],POLYGON:d["a"],MULTIPOINT:g["a"],MULTILINESTRING:_["a"],MULTIPOLYGON:f["a"]},T.Parser.GeometryParser_={POINT:T.Parser.prototype.parsePointText_,LINESTRING:T.Parser.prototype.parseLineStringText_,POLYGON:T.Parser.prototype.parsePolygonText_,MULTIPOINT:T.Parser.prototype.parseMultiPointText_,MULTILINESTRING:T.Parser.prototype.parseMultiLineStringText_,MULTIPOLYGON:T.Parser.prototype.parseMultiPolygonText_};e["a"]=T},"7b56":function(t,e,i){"use strict";var r=i("3110"),o=i("6993"),n=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new r["a"]({color:n.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:o["a"].POINT;var i=void 0===e.overflow?e.exceedLength:e.overflow;this.overflow_=void 0!==i&&i,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};n.DEFAULT_FILL_COLOR_="#333",n.prototype.clone=function(){return new n({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY()})},n.prototype.getOverflow=function(){return this.overflow_},n.prototype.getFont=function(){return this.font_},n.prototype.getMaxAngle=function(){return this.maxAngle_},n.prototype.getPlacement=function(){return this.placement_},n.prototype.getOffsetX=function(){return this.offsetX_},n.prototype.getOffsetY=function(){return this.offsetY_},n.prototype.getFill=function(){return this.fill_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getStroke=function(){return this.stroke_},n.prototype.getText=function(){return this.text_},n.prototype.getTextAlign=function(){return this.textAlign_},n.prototype.getTextBaseline=function(){return this.textBaseline_},n.prototype.getBackgroundFill=function(){return this.backgroundFill_},n.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},n.prototype.getPadding=function(){return this.padding_},n.prototype.setOverflow=function(t){this.overflow_=t},n.prototype.setFont=function(t){this.font_=t},n.prototype.setMaxAngle=function(t){this.maxAngle_=t},n.prototype.setOffsetX=function(t){this.offsetX_=t},n.prototype.setOffsetY=function(t){this.offsetY_=t},n.prototype.setPlacement=function(t){this.placement_=t},n.prototype.setFill=function(t){this.fill_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t},n.prototype.setStroke=function(t){this.stroke_=t},n.prototype.setText=function(t){this.text_=t},n.prototype.setTextAlign=function(t){this.textAlign_=t},n.prototype.setTextBaseline=function(t){this.textBaseline_=t},n.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},n.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},n.prototype.setPadding=function(t){this.padding_=t},e["a"]=n},8956:function(t,e,i){"use strict";var r=i("9d79"),o=i("403d"),n=function(t){var e,i=t||{};e=void 0!==i.attributions?i.attributions:[n.ATTRIBUTION];var r=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",s=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";o["a"].call(this,{attributions:e,cacheSize:i.cacheSize,crossOrigin:r,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:s,wrapX:i.wrapX})};r["a"].inherits(n,o["a"]),n.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',e["a"]=n},a8d0:function(t,e,i){"use strict";var r=i("9d79"),o=i("9f5e"),n=i("256f"),s=i("97ab"),a=function(t){this.matrixIds_=t.matrixIds,s["a"].call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})};r["a"].inherits(a,s["a"]),a.prototype.getMatrixId=function(t){return this.matrixIds_[t]},a.prototype.getMatrixIds=function(){return this.matrixIds_},a.createFromCapabilitiesMatrixSet=function(t,e,i){var r=[],s=[],h=[],c=[],u=[],p=void 0!==i?i:[],l="SupportedCRS",_="TileMatrix",g="Identifier",f="ScaleDenominator",m="TopLeftCorner",d="TileWidth",y="TileHeight",T=t[l],v=n["a"].get(T.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||n["a"].get(T),E=v.getMetersPerUnit(),I="ne"==v.getAxisOrientation().substr(0,2);return t[_].sort((function(t,e){return e[f]-t[f]})),t[_].forEach((function(t,e,i){var n;if(n=!(p.length>0)||o["a"].find(p,(function(e,i,r){return t[g]==e[_]})),n){s.push(t[g]);var a=28e-5*t[f]/E,l=t[d],T=t[y];I?h.push([t[m][1],t[m][0]]):h.push(t[m]),r.push(a),c.push(l==T?l:[l,T]),u.push([t["MatrixWidth"],-t["MatrixHeight"]])}})),new a({extent:e,origins:h,resolutions:r,matrixIds:s,tileSizes:c,sizes:u})},e["a"]=a},acf2:function(t,e,i){"use strict";i("cc01")},bcb4:function(t,e,i){"use strict";var r=i("9d79"),o=i("92fa"),n=i("0af5"),s=i("38f3"),a=i("7fc9"),h=i("256f"),c=i("3c81"),u=i("345d"),p=i("40f5"),l=i("2350"),_=i("2c30"),g=i("b0c1"),f=i("c721"),m=function(t){var e=t||{},i=e.params||{},r=!("TRANSPARENT"in i)||i["TRANSPARENT"];p["a"].call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,opaque:!r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=n["a"].createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())};r["a"].inherits(m,p["a"]),m.prototype.getGetFeatureInfoUrl=function(t,e,i,o){var a=h["a"].get(i),p=this.getProjection(),l=this.getTileGrid();l||(l=this.getTileGridForProjection(a));var _=l.getTileCoordForCoordAndResolution(t,e);if(!(l.getResolutions().length<=_[0])){var g=l.getResolution(_[0]),f=l.getTileCoordExtent(_,this.tmpExtent_),m=u["a"].toSize(l.getTileSize(_[0]),this.tmpSize),d=this.gutter_;0!==d&&(m=u["a"].buffer(m,d,this.tmpSize),f=n["a"].buffer(f,g*d,f)),p&&p!==a&&(g=c["a"].calculateSourceResolution(p,a,t,g),f=h["a"].transformExtent(f,a,p),t=h["a"].transform(t,a,p));var y={SERVICE:"WMS",VERSION:r["a"].DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_["LAYERS"]};s["a"].assign(y,this.params_,o);var T=Math.floor((t[0]-f[0])/g),v=Math.floor((f[3]-t[1])/g);return y[this.v13_?"I":"X"]=T,y[this.v13_?"J":"Y"]=v,this.getRequestUrl_(_,m,f,1,p||a,y)}},m.prototype.getGutterInternal=function(){return this.gutter_},m.prototype.getParams=function(){return this.params_},m.prototype.getRequestUrl_=function(t,e,i,r,n,s){var h=this.urls;if(h){if(s["WIDTH"]=e[0],s["HEIGHT"]=e[1],s[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(s["STYLES"]=""),1!=r)switch(this.serverType_){case l["a"].GEOSERVER:var c=90*r+.5|0;"FORMAT_OPTIONS"in s?s["FORMAT_OPTIONS"]+=";dpi:"+c:s["FORMAT_OPTIONS"]="dpi:"+c;break;case l["a"].MAPSERVER:s["MAP_RESOLUTION"]=90*r;break;case l["a"].CARMENTA_SERVER:case l["a"].QGIS:s["DPI"]=90*r;break;default:o["a"].assert(!1,52);break}var u,p,g=n.getAxisOrientation(),m=i;if(this.v13_&&"ne"==g.substr(0,2))u=i[0],m[0]=i[1],m[1]=u,u=i[2],m[2]=i[3],m[3]=u;if(s["BBOX"]=m.join(","),1==h.length)p=h[0];else{var d=a["a"].modulo(_["a"].hash(t),h.length);p=h[d]}return f["a"].appendParams(p,s)}},m.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},m.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},m.prototype.fixedTileUrlFunction=function(t,e,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var a=o.getResolution(t[0]),h=o.getTileCoordExtent(t,this.tmpExtent_),c=u["a"].toSize(o.getTileSize(t[0]),this.tmpSize),p=this.gutter_;0!==p&&(c=u["a"].buffer(c,p,this.tmpSize),h=n["a"].buffer(h,a*p,h)),1!=e&&(c=u["a"].scale(c,e,this.tmpSize));var l={SERVICE:"WMS",VERSION:r["a"].DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return s["a"].assign(l,this.params_),this.getRequestUrl_(t,c,h,e,i,l)}},m.prototype.updateParams=function(t){s["a"].assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},m.prototype.updateV13_=function(){var t=this.params_["VERSION"]||r["a"].DEFAULT_WMS_VERSION;this.v13_=g["a"].compareVersions(t,"1.3")>=0},e["a"]=m},c721:function(t,e,i){"use strict";var r={appendParams:function(t,e){var i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));var r=i.join("&");return t=t.replace(/[?&]$/,""),t=-1===t.indexOf("?")?t+"?":t+"&",t+r}};e["a"]=r},cc01:function(t,e,i){}}]);
//# sourceMappingURL=chunk-6ff2d83d.99628f8a.js.map