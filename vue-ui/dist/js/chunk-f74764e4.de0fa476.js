(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f74764e4","chunk-81873d10"],{"057f":function(t,e,r){var n=r("c6b6"),i=r("fc6a"),o=r("241c").f,a=r("4dae"),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(t){try{return o(t)}catch(e){return a(s)}};t.exports.f=function(t){return s&&"Window"==n(t)?h(t):o(i(t))}},"0b43":function(t,e,r){var n=r("04f8");t.exports=n&&!!Symbol["for"]&&!!Symbol.keyFor},"0c47":function(t,e,r){var n=r("da84"),i=r("d44e");i(n.JSON,"JSON",!0)},"0d26":function(t,e,r){var n=r("e330"),i=Error,o=n("".replace),a=function(t){return String(i(t).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,h=s.test(a);t.exports=function(t,e){if(h&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,s,"");return t}},"108b":function(t,e,r){"use strict";var n=r("9d79"),i=r("082b"),o=r("78d6"),a=r("b49e"),s=r("a568"),h=r("1e8d"),u=r("d60d"),c=r("06f8"),d=r("0af5"),l=r("57cb"),f=r("3388"),p=r("e526"),_=r("12bd"),g=r("d5d3"),v=r("cdc1"),y=r("db9f"),m=r("d1cc"),C=r("09d8"),E={DRAWSTART:"drawstart",DRAWEND:"drawend"},b=E,w=r("d1cd"),x=r("f950"),S=r("e671"),F=r("02df"),T=r("3e31"),L=function(t){w["a"].call(this,{handleDownEvent:L.handleDownEvent_,handleEvent:L.handleEvent,handleUpEvent:L.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=L.getMode_(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===L.Mode_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:l["a"].TRUE;var e=t.geometryFunction;if(!e)if(this.type_===p["a"].CIRCLE)e=function(t,e){var r=e||new f["a"]([NaN,NaN]),n=s["a"].squaredDistance(t[0],t[1]);return r.setCenterAndRadius(t[0],Math.sqrt(n)),r};else{var r,n=this.mode_;n===L.Mode_.POINT?r=m["a"]:n===L.Mode_.LINE_STRING?r=_["a"]:n===L.Mode_.POLYGON&&(r=C["a"]),e=function(t,e){var i=e;return i?n===L.Mode_.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new r(t),i}}this.geometryFunction_=e,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new S["a"]({source:new F["a"]({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:L.getDefaultStyleFunction()}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:c["a"].noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=c["a"].always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:c["a"].shiftKeyOnly,h["a"].listen(this,a["a"].getChangeEventType(x["a"].ACTIVE),this.updateState_,this)};n["a"].inherits(L,w["a"]),L.getDefaultStyleFunction=function(){var t=T["a"].createDefaultEditing();return function(e,r){return t[e.getGeometry().getType()]}},L.prototype.setMap=function(t){w["a"].prototype.setMap.call(this,t),this.updateState_()},L.handleEvent=function(t){this.freehand_=this.mode_!==L.Mode_.POINT&&this.freehandCondition_(t);var e=!0;return this.freehand_&&t.type===o["a"].POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),e=!1):this.freehand_&&t.type===o["a"].POINTERDOWN?e=!1:t.type===o["a"].POINTERMOVE?e=this.handlePointerMove_(t):t.type===o["a"].DBLCLICK&&(e=!1),w["a"].handleEvent.call(this,t)&&e},L.handleDownEvent_=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.downPx_=t.pixel,!0)},L.handleUpEvent_=function(t){var e=!0;this.handlePointerMove_(t);var r=this.mode_===L.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||r?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===L.Mode_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},L.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],i=e[1]-r[1],o=n*n+i*i;this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},L.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var r=!1,n=[this.finishCoordinate_];if(this.mode_===L.Mode_.LINE_STRING?r=this.sketchCoords_.length>this.minPoints_:this.mode_===L.Mode_.POLYGON&&(r=this.sketchCoords_[0].length>this.minPoints_,n=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),r)for(var i=t.map,o=0,a=n.length;o<a;o++){var s=n[o],h=i.getPixelFromCoordinate(s),u=t.pixel,c=u[0]-h[0],d=u[1]-h[1],l=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(c*c+d*d)<=l,e){this.finishCoordinate_=s;break}}}return e},L.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(this.sketchPoint_){var r=this.sketchPoint_.getGeometry();r.setCoordinates(e)}else this.sketchPoint_=new i["a"](new m["a"](e)),this.updateSketchFeatures_()},L.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===L.Mode_.POINT?this.sketchCoords_=e.slice():this.mode_===L.Mode_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[e.slice(),e.slice()],this.mode_===L.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new i["a"](new _["a"](this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new i["a"],this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new L.Event(b.DRAWSTART,this.sketchFeature_))},L.prototype.modifyDrawing_=function(t){var e,r,n,o=t.coordinate,a=this.sketchFeature_.getGeometry();if(this.mode_===L.Mode_.POINT?r=this.sketchCoords_:this.mode_===L.Mode_.POLYGON?(e=this.sketchCoords_[0],r=e[e.length-1],this.atFinish_(t)&&(o=this.finishCoordinate_.slice())):(e=this.sketchCoords_,r=e[e.length-1]),r[0]=o[0],r[1]=o[1],this.geometryFunction_(this.sketchCoords_,a),this.sketchPoint_){var s=this.sketchPoint_.getGeometry();s.setCoordinates(o)}if(a instanceof C["a"]&&this.mode_!==L.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new i["a"](new _["a"](null)));var h=a.getLinearRing(0);n=this.sketchLine_.getGeometry(),n.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates())}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry(),n.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()},L.prototype.addToDrawing_=function(t){var e,r,n=t.coordinate,i=this.sketchFeature_.getGeometry();this.mode_===L.Mode_.LINE_STRING?(this.finishCoordinate_=n.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(n.slice()),this.geometryFunction_(r,i)):this.mode_===L.Mode_.POLYGON&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(n.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,i)),this.updateSketchFeatures_(),e&&this.finishDrawing()},L.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e,r=this.sketchFeature_.getGeometry();this.mode_===L.Mode_.LINE_STRING?(t=this.sketchCoords_,t.splice(-2,1),this.geometryFunction_(t,r),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===L.Mode_.POLYGON&&(t=this.sketchCoords_[0],t.splice(-2,1),e=this.sketchLine_.getGeometry(),e.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,r)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},L.prototype.finishDrawing=function(){var t=this.abortDrawing_(),e=this.sketchCoords_,r=t.getGeometry();this.mode_===L.Mode_.LINE_STRING?(e.pop(),this.geometryFunction_(e,r)):this.mode_===L.Mode_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,r),e=r.getCoordinates()),this.type_===p["a"].MULTI_POINT?t.setGeometry(new v["a"]([e])):this.type_===p["a"].MULTI_LINE_STRING?t.setGeometry(new g["a"]([e])):this.type_===p["a"].MULTI_POLYGON&&t.setGeometry(new y["a"]([e])),this.dispatchEvent(new L.Event(b.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},L.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},L.prototype.extend=function(t){var e=t.getGeometry(),r=e;this.sketchFeature_=t,this.sketchCoords_=r.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new L.Event(b.DRAWSTART,this.sketchFeature_))},L.prototype.shouldStopEvent=l["a"].FALSE,L.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},L.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},L.createRegularPolygon=function(t,e){return function(r,n){var i=r[0],o=r[1],a=Math.sqrt(s["a"].squaredDistance(i,o)),h=n||C["a"].fromCircle(new f["a"](i),t),u=e||Math.atan((o[1]-i[1])/(o[0]-i[0]));return C["a"].makeRegular(h,i,a,u),h}},L.createBox=function(){return function(t,e){var r=d["a"].boundingExtent(t),n=e||new C["a"](null);return n.setCoordinates([[d["a"].getBottomLeft(r),d["a"].getBottomRight(r),d["a"].getTopRight(r),d["a"].getTopLeft(r),d["a"].getBottomLeft(r)]]),n}},L.getMode_=function(t){var e;return t===p["a"].POINT||t===p["a"].MULTI_POINT?e=L.Mode_.POINT:t===p["a"].LINE_STRING||t===p["a"].MULTI_LINE_STRING?e=L.Mode_.LINE_STRING:t===p["a"].POLYGON||t===p["a"].MULTI_POLYGON?e=L.Mode_.POLYGON:t===p["a"].CIRCLE&&(e=L.Mode_.CIRCLE),e},L.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},L.Event=function(t,e){u["a"].call(this,t),this.feature=e},n["a"].inherits(L.Event,u["a"]);e["a"]=L},"131a":function(t,e,r){var n=r("23e7"),i=r("d2bb");n({target:"Object",stat:!0},{setPrototypeOf:i})},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("d3b7");function n(t,e,r,n,i,o,a){try{var s=t[o](a),h=s.value}catch(u){return void r(u)}s.done?e(h):Promise.resolve(h).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,h,"next",t)}function h(t){n(a,i,o,s,h,"throw",t)}s(void 0)}))}}},"1f68":function(t,e,r){"use strict";var n=r("83ab"),i=r("edd0"),o=r("861d"),a=r("7b0b"),s=r("1d80"),h=Object.getPrototypeOf,u=Object.setPrototypeOf,c=Object.prototype,d="__proto__";if(n&&h&&u&&!(d in c))try{i(c,d,{configurable:!0,get:function(){return h(a(this))},set:function(t){var e=s(this);(o(t)||null===t)&&o(e)&&u(e,t)}})}catch(l){}},"23dc":function(t,e,r){var n=r("d44e");n(Math,"Math",!0)},3388:function(t,e,r){"use strict";var n=r("9d79"),i=r("0af5"),o=r("6a24"),a=r("e526"),s=r("b208"),h=r("abb7"),u=function(t,e,r){s["a"].call(this);var n=e||0;this.setCenterAndRadius(t,n,r)};n["a"].inherits(u,s["a"]),u.prototype.clone=function(){var t=new u(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},u.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<n){var h;if(0===s)for(h=0;h<this.stride;++h)r[h]=i[h];else{var u=this.getRadius()/Math.sqrt(s);for(r[0]=i[0]+u*o,r[1]=i[1]+u*a,h=2;h<this.stride;++h)r[h]=i[h]}return r.length=this.stride,s}return n},u.prototype.containsXY=function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()},u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},u.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return i["a"].createOrUpdate(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},u.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},u.prototype.getType=function(){return a["a"].CIRCLE},u.prototype.intersectsExtent=function(t){var e=this.getExtent();if(i["a"].intersects(t,e)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||(t[1]<=r[1]&&t[3]>=r[1]||i["a"].forEachCorner(t,this.intersectsCoordinate,this))}return!1},u.prototype.setCenter=function(t){var e,r=this.stride,n=this.flatCoordinates[r]-this.flatCoordinates[0],i=t.slice();for(i[r]=i[0]+n,e=1;e<r;++e)i[r+e]=t[e];this.setFlatCoordinates(this.layout,i)},u.prototype.setCenterAndRadius=function(t,e,r){if(t){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n,i,a=this.flatCoordinates,s=h["a"].coordinate(a,0,t,this.stride);for(a[s++]=a[0]+e,n=1,i=this.stride;n<i;++n)a[s++]=a[n];a.length=s,this.changed()}else this.setFlatCoordinates(o["a"].XY,null)},u.prototype.getCoordinates=function(){},u.prototype.setCoordinates=function(t,e){},u.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},u.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},u.prototype.transform,e["a"]=u},3410:function(t,e,r){var n=r("23e7"),i=r("d039"),o=r("7b0b"),a=r("e163"),s=r("e177"),h=i((function(){a(1)}));n({target:"Object",stat:!0,forced:h,sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},"428f":function(t,e,r){var n=r("da84");t.exports=n},"4dae":function(t,e,r){var n=r("23cb"),i=r("07fa"),o=r("8418"),a=Array,s=Math.max;t.exports=function(t,e,r){for(var h=i(t),u=n(e,h),c=n(void 0===r?h:r,h),d=a(s(c-u,0)),l=0;u<c;u++,l++)o(d,l,t[u]);return d.length=l,d}},"57b9":function(t,e,r){var n=r("c65b"),i=r("d066"),o=r("b622"),a=r("cb2d");t.exports=function(){var t=i("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,s=o("toPrimitive");e&&!e[s]&&a(e,s,(function(t){return n(r,this)}),{arity:1})}},"5a47":function(t,e,r){var n=r("23e7"),i=r("04f8"),o=r("d039"),a=r("7418"),s=r("7b0b"),h=!i||o((function(){a.f(1)}));n({target:"Object",stat:!0,forced:h},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(s(t)):[]}})},"6aaf":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("GeoServer")]),e("el-breadcrumb-item",[t._v("WFS")]),e("el-breadcrumb-item",[t._v("WFS综合操作")])],1),e("el-card",[e("button",{attrs:{id:"insert"},on:{click:t.insertClick}},[t._v("添加")]),e("button",{attrs:{id:"update"},on:{click:t.updateClick}},[t._v("修改")]),e("button",{attrs:{id:"delete"},on:{click:t.deleteClick}},[t._v("删除")]),e("button",{attrs:{id:"end"},on:{click:t.endClick}},[t._v("结束操作")]),e("div",{attrs:{id:"map"}})])],1)},i=[],o=r("c7eb"),a=r("1da1"),s=(r("a15b"),r("b0c0"),r("43df")),h=r("332e"),u=(r("d1cc"),r("e671")),c=r("02df"),d=r("169c"),l=r("14c4"),f=r("108b"),p=r("7269"),_=r("8d5e"),g=r("3e31"),v=r("29ae"),y=r("3110"),m=r("715e"),C=r("92cf"),E={data:function(){return{geoserverData:{wsName:"webgistest",uri:"http://www.openplans.org/webgistest",wfsURL:"http://119.91.20.243:28081/geoserver/wfs?",layer:"port"},select:null,edit:null,draw:null}},created:function(){},mounted:function(){this.initMap()},methods:{initMap:function(){var t=this,e=new c["a"]({format:new d["a"],url:function(e){return t.geoserverData.wfsURL+"service=WFS&version=1.1.0&request=GetFeature&typeName="+t.geoserverData.wsName+":"+t.geoserverData.layer+"&outputFormat=application/json&srsname=EPSG:4326&bbox="+e.join(",")+",EPSG:4326"},strategy:m["a"].bbox}),r=new u["a"]({title:"add Layer",source:e}),n=[Object(C["d"])("vec_w"),Object(C["d"])("cva_w"),r],i=new s["a"]({target:"map",layers:n,view:new h["a"]({projection:"EPSG:4326",center:[114,31],zoom:4})});i.on("pointermove",(function(t){i.hasFeatureAtPixel(t.pixel)?i.getTargetElement().style.cursor="pointer":i.getTargetElement().style.cursor="default"}));var o=new p["a"]({layers:[r],style:new g["a"]({image:new v["a"]({radius:8,fill:new y["a"]({color:"#f00"})})})}),a=new _["a"]({features:o.getFeatures()}),l=new f["a"]({source:new c["a"]({features:[]}),type:"Point",freehand:!1,stopClick:!0});i.addInteraction(o),i.addInteraction(a),i.addInteraction(l),a.setActive(!1),l.setActive(!1),o.setActive(!1),l.on("drawend",(function(e){var r=e.feature;t.sendWFS(r,"insert")})),o.on("select",(function(e){var r=e.selected;if(r.length>0){var n=r[0];a.getActive()||t.sendWFS(n,"delete")}})),a.on("modifyend",(function(e){var r=e.features,n=r.item(0);t.sendWFS(n,"update")})),this.select=o,this.edit=a,this.draw=l},insertClick:function(){this.select.setActive(!1),this.edit.setActive(!1),this.draw.setActive(!0)},updateClick:function(){this.draw.setActive(!1),this.edit.setActive(!0),this.select.setActive(!0)},deleteClick:function(){this.draw.setActive(!1),this.edit.setActive(!1),this.select.setActive(!0)},endClick:function(){this.draw.setActive(!1),this.select.setActive(!1),this.edit.setActive(!1)},sendWFS:function(t,e){var r=this;return Object(a["a"])(Object(o["a"])().mark((function n(){var i,a,s,h,u,c,d,f,p,_,g,v,y,m;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.clone(),a=t.getId(),s=i.getProperties(),u=new l["a"],c=r.geoserverData,d={featureNS:c.uri,featurePrefix:c.wsName,featureType:c.layer,srsName:"EPSG:4326"},"insert"===e?(s.address="测试要素添加",s.name="添加",s.porttype="wnm添加",s.province="wnm添加",f=i.getGeometry().getCoordinates(),s.lng=f[0],s.lat=f[1],i.setProperties(s),p=i.getGeometry(),p.applyTransform((function(t,e,r){for(var n=0;n<t.length;n+=r){var i=t[n],o=t[n+1];t[n]=o,t[n+1]=i}})),i.setGeometryName("geom"),i.setGeometry(p),h=u.writeTransaction([i],null,null,d)):"update"===e?(i.setId(a),s.address="测试要素修改",s.name="修改",_=i.getGeometry().getCoordinates(),s.lng=_[0],s.lat=_[1],i.setProperties(s),i.getGeometry().applyTransform((function(t,e,r){for(var n=0;n<t.length;n+=r){var i=t[n],o=t[n+1];t[n]=o,t[n+1]=i}})),i.setGeometryName("geom"),h=u.writeTransaction(null,[i],null,d)):"delete"===e&&(i.setId(a),h=u.writeTransaction(null,null,[i],d)),g=new XMLSerializer,v=g.serializeToString(h),n.next=11,r.$http.post(r.geoserverData.wfsURL,v,{headers:{"Content-Type":"application/xml"}});case 11:y=n.sent,m=y.data,-1!=m.indexOf("Exception")?(console.log(m),alert("添加失败！"+m)):(alert("添加成功！"),window.location.reload());case 14:case"end":return n.stop()}}),n)})))()}}},b=E,w=r("2877"),x=Object(w["a"])(b,n,i,!1,null,"4c8111e7",null);e["default"]=x.exports},7156:function(t,e,r){var n=r("1626"),i=r("861d"),o=r("d2bb");t.exports=function(t,e,r){var a,s;return o&&n(a=e.constructor)&&a!==r&&i(s=a.prototype)&&s!==r.prototype&&o(t,s),t}},7269:function(t,e,r){"use strict";var n=r("9d79"),i=r("6765"),o=r("9f5e"),a=r("1e8d"),s=r("d60d"),h=r("06f8"),u=r("57cb"),c=r("e526"),d=r("7d01"),l=r("e671"),f=r("38f3"),p=r("02df"),_=r("3e31"),g=function(t){d["a"].call(this,{handleEvent:g.handleEvent});var e=t||{};this.condition_=e.condition?e.condition:h["a"].singleClick,this.addCondition_=e.addCondition?e.addCondition:h["a"].never,this.removeCondition_=e.removeCondition?e.removeCondition:h["a"].never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:h["a"].shiftKeyOnly,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:u["a"].TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0;var r,n=new l["a"]({source:new p["a"]({useSpatialIndex:!1,features:e.features,wrapX:e.wrapX}),style:e.style?e.style:g.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=n,e.layers)if("function"===typeof e.layers)r=e.layers;else{var s=e.layers;r=function(t){return o["a"].includes(s,t)}}else r=u["a"].TRUE;this.layerFilter_=r,this.featureLayerAssociation_={};var c=this.featureOverlay_.getSource().getFeaturesCollection();a["a"].listen(c,i["a"].ADD,this.addFeature_,this),a["a"].listen(c,i["a"].REMOVE,this.removeFeature_,this)};n["a"].inherits(g,d["a"]),g.prototype.addFeatureLayerAssociation_=function(t,e){var r=n["a"].getUid(t);this.featureLayerAssociation_[r]=e},g.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},g.prototype.getHitTolerance=function(){return this.hitTolerance_},g.prototype.getLayer=function(t){var e=n["a"].getUid(t);return this.featureLayerAssociation_[e]},g.handleEvent=function(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),r=this.removeCondition_(t),n=this.toggleCondition_(t),i=!e&&!r&&!n,a=t.map,s=this.featureOverlay_.getSource().getFeaturesCollection(),u=[],c=[];if(i){var d;for(f["a"].clear(this.featureLayerAssociation_),a.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return c.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_}),d=s.getLength()-1;d>=0;--d){var l=s.item(d),p=c.indexOf(l);p>-1?c.splice(p,1):(s.remove(l),u.push(l))}0!==c.length&&s.extend(c)}else{var _;for(a.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.filter_(t,i))return!e&&!n||o["a"].includes(s.getArray(),t)?(r||n)&&o["a"].includes(s.getArray(),t)&&(u.push(t),this.removeFeatureLayerAssociation_(t)):(c.push(t),this.addFeatureLayerAssociation_(t,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_}),_=u.length-1;_>=0;--_)s.remove(u[_]);s.extend(c)}return(c.length>0||u.length>0)&&this.dispatchEvent(new g.Event(g.EventType_.SELECT,c,u,t)),h["a"].pointerMove(t)},g.prototype.setHitTolerance=function(t){this.hitTolerance_=t},g.prototype.setMap=function(t){var e=this.getMap(),r=this.featureOverlay_.getSource().getFeaturesCollection();e&&r.forEach(e.unskipFeature,e),d["a"].prototype.setMap.call(this,t),this.featureOverlay_.setMap(t),t&&r.forEach(t.skipFeature,t)},g.getDefaultStyleFunction=function(){var t=_["a"].createDefaultEditing();return o["a"].extend(t[c["a"].POLYGON],t[c["a"].LINE_STRING]),o["a"].extend(t[c["a"].GEOMETRY_COLLECTION],t[c["a"].LINE_STRING]),function(e,r){return e.getGeometry()?t[e.getGeometry().getType()]:null}},g.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},g.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},g.prototype.removeFeatureLayerAssociation_=function(t){var e=n["a"].getUid(t);delete this.featureLayerAssociation_[e]},g.Event=function(t,e,r,n){s["a"].call(this,t),this.selected=e,this.deselected=r,this.mapBrowserEvent=n},n["a"].inherits(g.Event,s["a"]),g.EventType_={SELECT:"select"},e["a"]=g},"8d5e":function(t,e,r){"use strict";var n=r("9d79"),i=r("0941"),o=r("6765"),a=r("082b"),s=r("78d6"),h=r("183c"),u=r("9f5e"),c=r("a568"),d=r("1e8d"),l=r("d60d"),f=r("8fc0"),p=r("06f8"),_=r("0af5"),g=r("e526"),v=r("d1cc"),y={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},m=y,C=r("d1cd"),E=r("e671"),b=r("02df"),w=r("d291"),x=r("2cbd"),S=r("3e31"),F=function(t){var e;if(C["a"].call(this,{handleDownEvent:F.handleDownEvent_,handleDragEvent:F.handleDragEvent_,handleEvent:F.handleEvent,handleUpEvent:F.handleUpEvent_}),this.condition_=t.condition?t.condition:p["a"].primaryAction,this.defaultDeleteCondition_=function(t){return p["a"].altKeyOnly(t)&&p["a"].singleClick(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:p["a"].always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new x["a"],this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new E["a"]({source:new b["a"]({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:F.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,t.source?(this.source_=t.source,e=new i["a"](this.source_.getFeatures()),d["a"].listen(this.source_,w["a"].ADDFEATURE,this.handleSourceAdd_,this),d["a"].listen(this.source_,w["a"].REMOVEFEATURE,this.handleSourceRemove_,this)):e=t.features,!e)throw new Error("The modify interaction requires features or a source");this.features_=e,this.features_.forEach(this.addFeature_,this),d["a"].listen(this.features_,o["a"].ADD,this.handleFeatureAdd_,this),d["a"].listen(this.features_,o["a"].REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null};n["a"].inherits(F,C["a"]),F.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0,F.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1,F.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),d["a"].listen(t,f["a"].CHANGE,this.handleFeatureChange_,this)},F.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new F.Event(m.MODIFYSTART,this.features_,t)))},F.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d["a"].unlisten(t,f["a"].CHANGE,this.handleFeatureChange_,this)},F.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,r=[];e.forEach((function(e){t===e.feature&&r.push(e)}));for(var n=r.length-1;n>=0;--n)e.remove(r[n])},F.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),C["a"].prototype.setActive.call(this,t)},F.prototype.setMap=function(t){this.overlay_.setMap(t),C["a"].prototype.setMap.call(this,t)},F.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},F.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},F.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},F.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},F.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},F.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},F.prototype.writeMultiPointGeometry_=function(t,e){var r,n,i,o,a=e.getCoordinates();for(n=0,i=a.length;n<i;++n)r=a[n],o={feature:t,geometry:e,depth:[n],index:n,segment:[r,r]},this.rBush_.insert(e.getExtent(),o)},F.prototype.writeLineStringGeometry_=function(t,e){var r,n,i,o,a=e.getCoordinates();for(r=0,n=a.length-1;r<n;++r)i=a.slice(r,r+2),o={feature:t,geometry:e,index:r,segment:i},this.rBush_.insert(_["a"].boundingExtent(i),o)},F.prototype.writeMultiLineStringGeometry_=function(t,e){var r,n,i,o,a,s,h,u=e.getCoordinates();for(o=0,a=u.length;o<a;++o)for(r=u[o],n=0,i=r.length-1;n<i;++n)s=r.slice(n,n+2),h={feature:t,geometry:e,depth:[o],index:n,segment:s},this.rBush_.insert(_["a"].boundingExtent(s),h)},F.prototype.writePolygonGeometry_=function(t,e){var r,n,i,o,a,s,h,u=e.getCoordinates();for(o=0,a=u.length;o<a;++o)for(r=u[o],n=0,i=r.length-1;n<i;++n)s=r.slice(n,n+2),h={feature:t,geometry:e,depth:[o],index:n,segment:s},this.rBush_.insert(_["a"].boundingExtent(s),h)},F.prototype.writeMultiPolygonGeometry_=function(t,e){var r,n,i,o,a,s,h,u,c,d,l=e.getCoordinates();for(s=0,h=l.length;s<h;++s)for(u=l[s],o=0,a=u.length;o<a;++o)for(r=u[o],n=0,i=r.length-1;n<i;++n)c=r.slice(n,n+2),d={feature:t,geometry:e,depth:[o,s],index:n,segment:c},this.rBush_.insert(_["a"].boundingExtent(c),d)},F.prototype.writeCircleGeometry_=function(t,e){var r=e.getCenter(),n={feature:t,geometry:e,index:F.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX,segment:[r,r]},i={feature:t,geometry:e,index:F.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX,segment:[r,r]},o=[n,i];n.featureSegments=i.featureSegments=o,this.rBush_.insert(_["a"].createOrUpdateFromCoordinate(r),n),this.rBush_.insert(e.getExtent(),i)},F.prototype.writeGeometryCollectionGeometry_=function(t,e){var r,n=e.getGeometriesArray();for(r=0;r<n.length;++r)this.SEGMENT_WRITERS_[n[r].getType()].call(this,t,n[r])},F.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;if(e){var r=e.getGeometry();r.setCoordinates(t)}else e=new a["a"](new v["a"](t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e);return e},F.compareIndexes_=function(t,e){return t.index-e.index},F.handleDownEvent_=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var i=[],o=r.getGeometry(),a=o.getCoordinates(),s=_["a"].boundingExtent([a]),h=this.rBush_.getInExtent(s),u={};h.sort(F.compareIndexes_);for(var d=0,l=h.length;d<l;++d){var f=h[d],p=f.segment,v=n["a"].getUid(f.feature),y=f.depth;if(y&&(v+="-"+y.join("-")),u[v]||(u[v]=new Array(2)),f.geometry.getType()===g["a"].CIRCLE&&f.index===F.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var m=F.closestOnSegmentData_(e,f);c["a"].equals(m,a)&&!u[v][0]&&(this.dragSegments_.push([f,0]),u[v][0]=f)}else if(c["a"].equals(p[0],a)&&!u[v][0])this.dragSegments_.push([f,0]),u[v][0]=f;else if(c["a"].equals(p[1],a)&&!u[v][1]){if((f.geometry.getType()===g["a"].LINE_STRING||f.geometry.getType()===g["a"].MULTI_LINE_STRING)&&u[v][0]&&0===u[v][0].index)continue;this.dragSegments_.push([f,1]),u[v][1]=f}else this.insertVertexCondition_(t)&&n["a"].getUid(p)in this.vertexSegments_&&!u[v][0]&&!u[v][1]&&i.push([f,a])}i.length&&this.willModifyFeatures_(t);for(var C=i.length-1;C>=0;--C)this.insertVertex_.apply(this,i[C])}return!!this.vertexFeature_},F.handleDragEvent_=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){var i,o=this.dragSegments_[r],a=o[0],s=a.depth,h=a.geometry,u=a.segment,d=o[1];while(e.length<h.getStride())e.push(u[d][e.length]);switch(h.getType()){case g["a"].POINT:i=e,u[0]=u[1]=e;break;case g["a"].MULTI_POINT:i=h.getCoordinates(),i[a.index]=e,u[0]=u[1]=e;break;case g["a"].LINE_STRING:i=h.getCoordinates(),i[a.index+d]=e,u[d]=e;break;case g["a"].MULTI_LINE_STRING:i=h.getCoordinates(),i[s[0]][a.index+d]=e,u[d]=e;break;case g["a"].POLYGON:i=h.getCoordinates(),i[s[0]][a.index+d]=e,u[d]=e;break;case g["a"].MULTI_POLYGON:i=h.getCoordinates(),i[s[1]][s[0]][a.index+d]=e,u[d]=e;break;case g["a"].CIRCLE:u[0]=u[1]=e,a.index===F.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX?(this.changingFeature_=!0,h.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,h.setRadius(c["a"].distance(h.getCenter(),e)),this.changingFeature_=!1);break;default:}i&&this.setGeometryCoordinates_(h,i)}this.createOrUpdateVertexFeature_(e)},F.handleUpEvent_=function(t){for(var e,r,n=this.dragSegments_.length-1;n>=0;--n)if(e=this.dragSegments_[n][0],r=e.geometry,r.getType()===g["a"].CIRCLE){var i=r.getCenter(),o=e.featureSegments[0],a=e.featureSegments[1];o.segment[0]=o.segment[1]=i,a.segment[0]=a.segment[1]=i,this.rBush_.update(_["a"].createOrUpdateFromCoordinate(i),o),this.rBush_.update(r.getExtent(),a)}else this.rBush_.update(_["a"].boundingExtent(e.segment),e);return this.modified_&&(this.dispatchEvent(new F.Event(m.MODIFYEND,this.features_,t)),this.modified_=!1),!1},F.handleEvent=function(t){return!(t instanceof h["a"])||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=s["a"].POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=s["a"].SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==s["a"].SINGLECLICK&&(this.ignoreNextSingleClick_=!1),C["a"].handleEvent.call(this,t)&&!e);var e},F.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},F.prototype.handlePointerAtPixel_=function(t,e){var r=e.getCoordinateFromPixel(t),i=function(t,e){return F.pointDistanceToSegmentDataSquared_(r,t)-F.pointDistanceToSegmentDataSquared_(r,e)},o=_["a"].buffer(_["a"].createOrUpdateFromCoordinate(r),e.getView().getResolution()*this.pixelTolerance_),a=this.rBush_,s=a.getInExtent(o);if(s.length>0){s.sort(i);var h=s[0],u=h.segment,d=F.closestOnSegmentData_(r,h),l=e.getPixelFromCoordinate(d),f=c["a"].distance(t,l);if(f<=this.pixelTolerance_){var p={};if(h.geometry.getType()===g["a"].CIRCLE&&h.index===F.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(d);else{var v,y=e.getPixelFromCoordinate(u[0]),m=e.getPixelFromCoordinate(u[1]),C=c["a"].squaredDistance(l,y),E=c["a"].squaredDistance(l,m);f=Math.sqrt(Math.min(C,E)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(d=C>E?u[1]:u[0]),this.createOrUpdateVertexFeature_(d);for(var b=1,w=s.length;b<w;++b){if(v=s[b].segment,!(c["a"].equals(u[0],v[0])&&c["a"].equals(u[1],v[1])||c["a"].equals(u[0],v[1])&&c["a"].equals(u[1],v[0])))break;p[n["a"].getUid(v)]=!0}}return p[n["a"].getUid(u)]=!0,void(this.vertexSegments_=p)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},F.pointDistanceToSegmentDataSquared_=function(t,e){var r=e.geometry;if(r.getType()===g["a"].CIRCLE){var n=r;if(e.index===F.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var i=c["a"].squaredDistance(n.getCenter(),t),o=Math.sqrt(i)-n.getRadius();return o*o}}return c["a"].squaredDistanceToSegment(t,e.segment)},F.closestOnSegmentData_=function(t,e){var r=e.geometry;return r.getType()===g["a"].CIRCLE&&e.index===F.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX?r.getClosestPoint(t):c["a"].closestOnSegment(t,e.segment)},F.prototype.insertVertex_=function(t,e){var r,n=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;while(e.length<o.getStride())e.push(0);switch(o.getType()){case g["a"].MULTI_LINE_STRING:r=o.getCoordinates(),r[a[0]].splice(s+1,0,e);break;case g["a"].POLYGON:r=o.getCoordinates(),r[a[0]].splice(s+1,0,e);break;case g["a"].MULTI_POLYGON:r=o.getCoordinates(),r[a[1]][a[0]].splice(s+1,0,e);break;case g["a"].LINE_STRING:r=o.getCoordinates(),r.splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,r);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(o,s,a,1);var u={segment:[n[0],e],feature:i,geometry:o,depth:a,index:s};h.insert(_["a"].boundingExtent(u.segment),u),this.dragSegments_.push([u,1]);var c={segment:[e,n[1]],feature:i,geometry:o,depth:a,index:s+1};h.insert(_["a"].boundingExtent(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},F.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s["a"].POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new F.Event(m.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},F.prototype.removeVertex_=function(){var t,e,r,i,o,a,s,h,u,c,d,l=this.dragSegments_,f={},p=!1;for(o=l.length-1;o>=0;--o)r=l[o],c=r[0],d=n["a"].getUid(c.feature),c.depth&&(d+="-"+c.depth.join("-")),d in f||(f[d]={}),0===r[1]?(f[d].right=c,f[d].index=c.index):1==r[1]&&(f[d].left=c,f[d].index=c.index+1);for(d in f){switch(u=f[d].right,s=f[d].left,a=f[d].index,h=a-1,c=void 0!==s?s:u,h<0&&(h=0),i=c.geometry,e=i.getCoordinates(),t=e,p=!1,i.getType()){case g["a"].MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(a,1),p=!0);break;case g["a"].LINE_STRING:e.length>2&&(e.splice(a,1),p=!0);break;case g["a"].MULTI_POLYGON:t=t[c.depth[1]];case g["a"].POLYGON:t=t[c.depth[0]],t.length>4&&(a==t.length-1&&(a=0),t.splice(a,1),p=!0,0===a&&(t.pop(),t.push(t[0]),h=t.length-1));break;default:}if(p){this.setGeometryCoordinates_(i,e);var v=[];if(void 0!==s&&(this.rBush_.remove(s),v.push(s.segment[0])),void 0!==u&&(this.rBush_.remove(u),v.push(u.segment[1])),void 0!==s&&void 0!==u){var y={depth:c.depth,feature:c.feature,geometry:c.geometry,index:h,segment:v};this.rBush_.insert(_["a"].boundingExtent(y.segment),y)}this.updateSegmentIndices_(i,a,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),l.length=0}}return p},F.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},F.prototype.updateSegmentIndices_=function(t,e,r,n){this.rBush_.forEachInExtent(t.getExtent(),(function(i){i.geometry===t&&(void 0===r||void 0===i.depth||u["a"].equals(i.depth,r))&&i.index>e&&(i.index+=n)}))},F.getDefaultStyleFunction=function(){var t=S["a"].createDefaultEditing();return function(e,r){return t[g["a"].POINT]}},F.Event=function(t,e,r){l["a"].call(this,t),this.features=e,this.mapBrowserEvent=r},n["a"].inherits(F.Event,l["a"]);e["a"]=F},"944a":function(t,e,r){var n=r("d066"),i=r("e065"),o=r("d44e");i("toStringTag"),o(n("Symbol"),"Symbol")},a15b:function(t,e,r){"use strict";var n=r("23e7"),i=r("e330"),o=r("44ad"),a=r("fc6a"),s=r("a640"),h=i([].join),u=o!=Object,c=s("join",",");n({target:"Array",proto:!0,forced:u||!c},{join:function(t){return h(a(this),void 0===t?",":t)}})},a4d3:function(t,e,r){r("d9f5"),r("b4f8"),r("c513"),r("e9c4"),r("5a47")},ab36:function(t,e,r){var n=r("861d"),i=r("9112");t.exports=function(t,e){n(e)&&"cause"in e&&i(t,"cause",e.cause)}},aeb0:function(t,e,r){var n=r("9bf2").f;t.exports=function(t,e,r){r in t||n(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},b4f8:function(t,e,r){var n=r("23e7"),i=r("d066"),o=r("1a2d"),a=r("577e"),s=r("5692"),h=r("0b43"),u=s("string-to-symbol-registry"),c=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!h},{for:function(t){var e=a(t);if(o(u,e))return u[e];var r=i("Symbol")(e);return u[e]=r,c[r]=e,r}})},b636:function(t,e,r){var n=r("e065");n("asyncIterator")},b980:function(t,e,r){var n=r("d039"),i=r("5c6c");t.exports=!n((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},c513:function(t,e,r){var n=r("23e7"),i=r("1a2d"),o=r("d9b5"),a=r("0d51"),s=r("5692"),h=r("0b43"),u=s("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!h},{keyFor:function(t){if(!o(t))throw TypeError(a(t)+" is not a symbol");if(i(u,t))return u[t]}})},c7eb:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("b636"),r("944a"),r("0c47"),r("23dc"),r("3410"),r("d9e2"),r("14d9"),r("159b"),r("b0c0"),r("131a"),r("1f68"),r("fb6a");function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",h=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(O){c=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:w(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(O){return{type:"throw",arg:O}}}t.wrap=d;var f={};function p(){}function _(){}function g(){}var v={};c(v,s,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(L([])));m&&m!==e&&r.call(m,s)&&(v=m);var C=g.prototype=p.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,s,h){var u=l(t[o],t,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==n(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,s,h)}),(function(t){i("throw",t,s,h)})):e.resolve(d).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,h)}))}h(u.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return I()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var h=l(t,e,r);if("normal"===h.type){if(n=r.done?"completed":"suspendedYield",h.arg===f)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(n="completed",r.method="throw",r.arg=h.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return _.prototype=g,o(C,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},E(b.prototype),c(b.prototype,h,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(d(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(C),c(C,u,"Generator"),c(C,s,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),h=r.call(o,"finallyLoc");if(s&&h){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),F(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;F(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}},d28b:function(t,e,r){var n=r("e065");n("iterator")},d9e2:function(t,e,r){var n=r("23e7"),i=r("da84"),o=r("2ba4"),a=r("e5cb"),s="WebAssembly",h=i[s],u=7!==Error("e",{cause:7}).cause,c=function(t,e){var r={};r[t]=a(t,e,u),n({global:!0,constructor:!0,arity:1,forced:u},r)},d=function(t,e){if(h&&h[t]){var r={};r[t]=a(s+"."+t,e,u),n({target:s,stat:!0,constructor:!0,arity:1,forced:u},r)}};c("Error",(function(t){return function(e){return o(t,this,arguments)}})),c("EvalError",(function(t){return function(e){return o(t,this,arguments)}})),c("RangeError",(function(t){return function(e){return o(t,this,arguments)}})),c("ReferenceError",(function(t){return function(e){return o(t,this,arguments)}})),c("SyntaxError",(function(t){return function(e){return o(t,this,arguments)}})),c("TypeError",(function(t){return function(e){return o(t,this,arguments)}})),c("URIError",(function(t){return function(e){return o(t,this,arguments)}})),d("CompileError",(function(t){return function(e){return o(t,this,arguments)}})),d("LinkError",(function(t){return function(e){return o(t,this,arguments)}})),d("RuntimeError",(function(t){return function(e){return o(t,this,arguments)}}))},d9f5:function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("c65b"),a=r("e330"),s=r("c430"),h=r("83ab"),u=r("04f8"),c=r("d039"),d=r("1a2d"),l=r("3a9b"),f=r("825a"),p=r("fc6a"),_=r("a04b"),g=r("577e"),v=r("5c6c"),y=r("7c73"),m=r("df75"),C=r("241c"),E=r("057f"),b=r("7418"),w=r("06cf"),x=r("9bf2"),S=r("37e8"),F=r("d1e7"),T=r("cb2d"),L=r("5692"),I=r("f772"),O=r("d012"),N=r("90e3"),k=r("b622"),P=r("e538"),M=r("e065"),G=r("57b9"),R=r("d44e"),D=r("69f3"),A=r("b727").forEach,U=I("hidden"),j="Symbol",Y="prototype",q=D.set,B=D.getterFor(j),V=Object[Y],W=i.Symbol,X=W&&W[Y],H=i.TypeError,K=i.QObject,J=w.f,$=x.f,z=E.f,Q=F.f,Z=a([].push),tt=L("symbols"),et=L("op-symbols"),rt=L("wks"),nt=!K||!K[Y]||!K[Y].findChild,it=h&&c((function(){return 7!=y($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=J(V,e);n&&delete V[e],$(t,e,r),n&&t!==V&&$(V,e,n)}:$,ot=function(t,e){var r=tt[t]=y(X);return q(r,{type:j,tag:t,description:e}),h||(r.description=e),r},at=function(t,e,r){t===V&&at(et,e,r),f(t);var n=_(e);return f(r),d(tt,n)?(r.enumerable?(d(t,U)&&t[U][n]&&(t[U][n]=!1),r=y(r,{enumerable:v(0,!1)})):(d(t,U)||$(t,U,v(1,{})),t[U][n]=!0),it(t,n,r)):$(t,n,r)},st=function(t,e){f(t);var r=p(e),n=m(r).concat(lt(r));return A(n,(function(e){h&&!o(ut,r,e)||at(t,e,r[e])})),t},ht=function(t,e){return void 0===e?y(t):st(y(t),e)},ut=function(t){var e=_(t),r=o(Q,this,e);return!(this===V&&d(tt,e)&&!d(et,e))&&(!(r||!d(this,e)||!d(tt,e)||d(this,U)&&this[U][e])||r)},ct=function(t,e){var r=p(t),n=_(e);if(r!==V||!d(tt,n)||d(et,n)){var i=J(r,n);return!i||!d(tt,n)||d(r,U)&&r[U][n]||(i.enumerable=!0),i}},dt=function(t){var e=z(p(t)),r=[];return A(e,(function(t){d(tt,t)||d(O,t)||Z(r,t)})),r},lt=function(t){var e=t===V,r=z(e?et:p(t)),n=[];return A(r,(function(t){!d(tt,t)||e&&!d(V,t)||Z(n,tt[t])})),n};u||(W=function(){if(l(X,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,e=N(t),r=function(t){this===V&&o(r,et,t),d(this,U)&&d(this[U],e)&&(this[U][e]=!1),it(this,e,v(1,t))};return h&&nt&&it(V,e,{configurable:!0,set:r}),ot(e,t)},X=W[Y],T(X,"toString",(function(){return B(this).tag})),T(W,"withoutSetter",(function(t){return ot(N(t),t)})),F.f=ut,x.f=at,S.f=st,w.f=ct,C.f=E.f=dt,b.f=lt,P.f=function(t){return ot(k(t),t)},h&&($(X,"description",{configurable:!0,get:function(){return B(this).description}}),s||T(V,"propertyIsEnumerable",ut,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:W}),A(m(rt),(function(t){M(t)})),n({target:j,stat:!0,forced:!u},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!h},{create:ht,defineProperty:at,defineProperties:st,getOwnPropertyDescriptor:ct}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:dt}),G(),R(W,j),O[U]=!0},e01a:function(t,e,r){"use strict";var n=r("23e7"),i=r("83ab"),o=r("da84"),a=r("e330"),s=r("1a2d"),h=r("1626"),u=r("3a9b"),c=r("577e"),d=r("9bf2").f,l=r("e893"),f=o.Symbol,p=f&&f.prototype;if(i&&h(f)&&(!("description"in p)||void 0!==f().description)){var _={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),e=u(p,this)?new f(t):void 0===t?f():f(t);return""===t&&(_[e]=!0),e};l(g,f),g.prototype=p,p.constructor=g;var v="Symbol(test)"==String(f("test")),y=a(p.valueOf),m=a(p.toString),C=/^Symbol\((.*)\)[^)]+$/,E=a("".replace),b=a("".slice);d(p,"description",{configurable:!0,get:function(){var t=y(this);if(s(_,t))return"";var e=m(t),r=v?b(e,7,-1):E(e,C,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:g})}},e065:function(t,e,r){var n=r("428f"),i=r("1a2d"),o=r("e538"),a=r("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},e391:function(t,e,r){var n=r("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},e538:function(t,e,r){var n=r("b622");e.f=n},e5cb:function(t,e,r){"use strict";var n=r("d066"),i=r("1a2d"),o=r("9112"),a=r("3a9b"),s=r("d2bb"),h=r("e893"),u=r("aeb0"),c=r("7156"),d=r("e391"),l=r("ab36"),f=r("0d26"),p=r("b980"),_=r("83ab"),g=r("c430");t.exports=function(t,e,r,v){var y="stackTraceLimit",m=v?2:1,C=t.split("."),E=C[C.length-1],b=n.apply(null,C);if(b){var w=b.prototype;if(!g&&i(w,"cause")&&delete w.cause,!r)return b;var x=n("Error"),S=e((function(t,e){var r=d(v?e:t,void 0),n=v?new b(t):new b;return void 0!==r&&o(n,"message",r),p&&o(n,"stack",f(n.stack,2)),this&&a(w,this)&&c(n,this,S),arguments.length>m&&l(n,arguments[m]),n}));if(S.prototype=w,"Error"!==E?s?s(S,x):h(S,x,{name:!0}):_&&y in b&&(u(S,b,y),u(S,b,"prepareStackTrace")),h(S,b),!g)try{w.name!==E&&o(w,"name",E),w.constructor=S}catch(F){}return S}}},e9c4:function(t,e,r){var n=r("23e7"),i=r("d066"),o=r("2ba4"),a=r("c65b"),s=r("e330"),h=r("d039"),u=r("e8b5"),c=r("1626"),d=r("861d"),l=r("d9b5"),f=r("f36a"),p=r("04f8"),_=i("JSON","stringify"),g=s(/./.exec),v=s("".charAt),y=s("".charCodeAt),m=s("".replace),C=s(1..toString),E=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,x=!p||h((function(){var t=i("Symbol")();return"[null]"!=_([t])||"{}"!=_({a:t})||"{}"!=_(Object(t))})),S=h((function(){return'"\\udf06\\ud834"'!==_("\udf06\ud834")||'"\\udead"'!==_("\udead")})),F=function(t,e){var r=f(arguments),n=e;if((d(e)||void 0!==t)&&!l(t))return u(e)||(e=function(t,e){if(c(n)&&(e=a(n,this,t,e)),!l(e))return e}),r[1]=e,o(_,null,r)},T=function(t,e,r){var n=v(r,e-1),i=v(r,e+1);return g(b,t)&&!g(w,i)||g(w,t)&&!g(b,n)?"\\u"+C(y(t,0),16):t};_&&n({target:"JSON",stat:!0,arity:3,forced:x||S},{stringify:function(t,e,r){var n=f(arguments),i=o(x?F:_,null,n);return S&&"string"==typeof i?m(i,E,T):i}})},edd0:function(t,e,r){var n=r("13d2"),i=r("9bf2");t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),i.f(t,e,r)}},fb6a:function(t,e,r){"use strict";var n=r("23e7"),i=r("e8b5"),o=r("68ee"),a=r("861d"),s=r("23cb"),h=r("07fa"),u=r("fc6a"),c=r("8418"),d=r("b622"),l=r("1dde"),f=r("f36a"),p=l("slice"),_=d("species"),g=Array,v=Math.max;n({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var r,n,d,l=u(this),p=h(l),y=s(t,p),m=s(void 0===e?p:e,p);if(i(l)&&(r=l.constructor,o(r)&&(r===g||i(r.prototype))?r=void 0:a(r)&&(r=r[_],null===r&&(r=void 0)),r===g||void 0===r))return f(l,y,m);for(n=new(void 0===r?g:r)(v(m-y,0)),d=0;y<m;y++,d++)y in l&&c(n,d,l[y]);return n.length=d,n}})}}]);
//# sourceMappingURL=chunk-f74764e4.de0fa476.js.map