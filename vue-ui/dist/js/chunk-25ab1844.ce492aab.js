(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25ab1844"],{"05b1":function(e,t,i){"use strict";var r=i("9d79"),n=i("9cff"),a=i("9f5e"),o=i("0af5"),s=i("38f3"),l=i("256f"),u=i("40f5"),c={KVP:"KVP",REST:"REST"},d=c,f=i("a8d0"),p=i("c721"),h=function(e){this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style;var t=e.urls;void 0===t&&void 0!==e.url&&(t=n["a"].expandUrl(e.url)),this.requestEncoding_=void 0!==e.requestEncoding?e.requestEncoding:d.KVP;var i=this.requestEncoding_,r=e.tileGrid,a={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i==d.KVP&&s["a"].assign(a,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_});var o=this.dimensions_;this.createFromWMTSTemplate_=function(e){return e=i==d.KVP?p["a"].appendParams(e,a):e.replace(/\{(\w+?)\}/g,(function(e,t){return t.toLowerCase()in a?a[t.toLowerCase()]:e})),function(t,n,a){if(t){var l={TileMatrix:r.getMatrixId(t[0]),TileCol:t[1],TileRow:-t[2]-1};s["a"].assign(l,o);var u=e;return u=i==d.KVP?p["a"].appendParams(u,l):u.replace(/\{(\w+?)\}/g,(function(e,t){return l[t]})),u}}};var l=t&&t.length>0?n["a"].createFromTileUrlFunctions(t.map(this.createFromWMTSTemplate_)):n["a"].nullTileUrlFunction;u["a"].call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:l,urls:t,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition}),this.setKey(this.getKeyForDimensions_())};r["a"].inherits(h,u["a"]),h.prototype.setUrls=function(e){this.urls=e;var t=e.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):n["a"].createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate_.bind(this))),t)},h.prototype.getDimensions=function(){return this.dimensions_},h.prototype.getFormat=function(){return this.format_},h.prototype.getLayer=function(){return this.layer_},h.prototype.getMatrixSet=function(){return this.matrixSet_},h.prototype.getRequestEncoding=function(){return this.requestEncoding_},h.prototype.getStyle=function(){return this.style_},h.prototype.getVersion=function(){return this.version_},h.prototype.getKeyForDimensions_=function(){var e=0,t=[];for(var i in this.dimensions_)t[e++]=i+"-"+this.dimensions_[i];return t.join("/")},h.prototype.updateDimensions=function(e){s["a"].assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},h.optionsFromCapabilities=function(e,t){var i=e["Contents"]["Layer"],r=a["a"].find(i,(function(e,i,r){return e["Identifier"]==t["layer"]}));if(null===r)return null;var n,s,u,c=e["Contents"]["TileMatrixSet"];n=r["TileMatrixSetLink"].length>1?"projection"in t?a["a"].findIndex(r["TileMatrixSetLink"],(function(e,i,r){var n=a["a"].find(c,(function(t){return t["Identifier"]==e["TileMatrixSet"]})),o=n["SupportedCRS"],s=l["a"].get(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||l["a"].get(o),u=l["a"].get(t["projection"]);return s&&u?l["a"].equivalent(s,u):o==t["projection"]})):a["a"].findIndex(r["TileMatrixSetLink"],(function(e,i,r){return e["TileMatrixSet"]==t["matrixSet"]})):0,n<0&&(n=0),s=r["TileMatrixSetLink"][n]["TileMatrixSet"],u=r["TileMatrixSetLink"][n]["TileMatrixSetLimits"];var p=r["Format"][0];"format"in t&&(p=t["format"]),n=a["a"].findIndex(r["Style"],(function(e,i,r){return"style"in t?e["Title"]==t["style"]:e["isDefault"]})),n<0&&(n=0);var h=r["Style"][n]["Identifier"],S={};"Dimension"in r&&r["Dimension"].forEach((function(e,t,i){var r=e["Identifier"],n=e["Default"];void 0===n&&(n=e["Value"][0]),S[r]=n}));var m,g=e["Contents"]["TileMatrixSet"],v=a["a"].find(g,(function(e,t,i){return e["Identifier"]==s})),T=v["SupportedCRS"];if(T&&(m=l["a"].get(T.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||l["a"].get(T)),"projection"in t){var E=l["a"].get(t["projection"]);E&&(m&&!l["a"].equivalent(E,m)||(m=E))}var x,y,M=r["WGS84BoundingBox"];if(void 0!==M){var P=l["a"].get("EPSG:4326").getExtent();y=M[0]==P[0]&&M[2]==P[2],x=l["a"].transformExtent(M,"EPSG:4326",m);var _=m.getExtent();_&&(o["a"].containsExtent(_,x)||(x=void 0))}var w=f["a"].createFromCapabilitiesMatrixSet(v,x,u),I=[],G=t["requestEncoding"];if(G=void 0!==G?G:"","OperationsMetadata"in e&&"GetTile"in e["OperationsMetadata"])for(var b=e["OperationsMetadata"]["GetTile"]["DCP"]["HTTP"]["Get"],R=0,L=b.length;R<L;++R)if(b[R]["Constraint"]){var F=a["a"].find(b[R]["Constraint"],(function(e){return"GetEncoding"==e["name"]})),j=F["AllowedValues"]["Value"];if(""===G&&(G=j[0]),G!==d.KVP)break;a["a"].includes(j,d.KVP)&&I.push(b[R]["href"])}else b[R]["href"]&&(G=d.KVP,I.push(b[R]["href"]));return 0===I.length&&(G=d.REST,r["ResourceURL"].forEach((function(e){"tile"===e["resourceType"]&&(p=e["format"],I.push(e["template"]))}))),{urls:I,layer:t["layer"],matrixSet:s,format:p,projection:m,requestEncoding:G,tileGrid:w,style:h,dimensions:S,wrapX:y,crossOrigin:t["crossOrigin"]}};t["a"]=h},a044:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("GeoServer")]),t("el-breadcrumb-item",[e._v("加载WMTS")])],1),t("el-card",[t("div",{attrs:{id:"map"}})])],1)},n=[],a=(i("fb6a"),i("43df")),o=i("332e"),s=i("4ca6"),l=i("a8d0"),u=i("05b1"),c=i("170b"),d=i("21bc"),f=i("92cf"),p={data:function(){return{projection:null}},created:function(){},mounted:function(){this.initMap()},methods:{initMap:function(){var e=new c["a"]({code:"EPSG:4326",units:"degrees",axisOrientation:"neu"}),t=new o["a"]({zoom:5,center:[-97,38],projection:e});new a["a"]({controls:d["a"].defaults({attribution:!1}).extend([]),target:"map",layers:[Object(f["d"])("vec_w"),Object(f["d"])("cva_w"),this.getTileLayer("topp:states")],view:t});this.projection=e},getTileLayer:function(e){var t="EPSG:4326",i=["EPSG:4326:0","EPSG:4326:1","EPSG:4326:2","EPSG:4326:3","EPSG:4326:4","EPSG:4326:5","EPSG:4326:6","EPSG:4326:7","EPSG:4326:8","EPSG:4326:9","EPSG:4326:10","EPSG:4326:11","EPSG:4326:12","EPSG:4326:13","EPSG:4326:14","EPSG:4326:15","EPSG:4326:16","EPSG:4326:17","EPSG:4326:18"],r="http://localhost:28081/geoserver/gwc/service/wmts",n="image/png",a=e,o=[.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953125,858306884765625e-19,4291534423828125e-20,21457672119140625e-21,10728836059570312e-21,5364418029785156e-21,2682209014892578e-21],c=["VERSION","LAYER","STYLE","TILEMATRIX","TILEMATRIXSET","SERVICE","FORMAT"],d={VERSION:"1.0.0",LAYER:a,TILEMATRIX:i,TILEMATRIXSET:t,SERVICE:"WMTS",FORMAT:n},f=r+"?";for(var p in d)c.indexOf(p.toUpperCase())<0&&(f=f+p+"="+d[p]+"&");f=f.slice(0,-1);var h=new u["a"]({url:f,layer:d["LAYER"],matrixSet:d["TILEMATRIXSET"],format:d["FORMAT"],projection:this.projection,tileGrid:new l["a"]({tileSize:[256,256],extent:[-180,-90,180,90],origin:[-180,90],resolutions:o,matrixIds:d["TILEMATRIX"]}),style:d["STYLE"],wrapX:!0}),S=new s["a"]({source:h});return S}}},h=p,S=i("2877"),m=Object(S["a"])(h,r,n,!1,null,"8ec8415a",null);t["default"]=m.exports},a8d0:function(e,t,i){"use strict";var r=i("9d79"),n=i("9f5e"),a=i("256f"),o=i("97ab"),s=function(e){this.matrixIds_=e.matrixIds,o["a"].call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})};r["a"].inherits(s,o["a"]),s.prototype.getMatrixId=function(e){return this.matrixIds_[e]},s.prototype.getMatrixIds=function(){return this.matrixIds_},s.createFromCapabilitiesMatrixSet=function(e,t,i){var r=[],o=[],l=[],u=[],c=[],d=void 0!==i?i:[],f="SupportedCRS",p="TileMatrix",h="Identifier",S="ScaleDenominator",m="TopLeftCorner",g="TileWidth",v="TileHeight",T=e[f],E=a["a"].get(T.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||a["a"].get(T),x=E.getMetersPerUnit(),y="ne"==E.getAxisOrientation().substr(0,2);return e[p].sort((function(e,t){return t[S]-e[S]})),e[p].forEach((function(e,t,i){var a;if(a=!(d.length>0)||n["a"].find(d,(function(t,i,r){return e[h]==t[p]})),a){o.push(e[h]);var s=28e-5*e[S]/x,f=e[g],T=e[v];y?l.push([e[m][1],e[m][0]]):l.push(e[m]),r.push(s),u.push(f==T?f:[f,T]),c.push([e["MatrixWidth"],-e["MatrixHeight"]])}})),new s({extent:t,origins:l,resolutions:r,matrixIds:o,tileSizes:u,sizes:c})},t["a"]=s},c721:function(e,t,i){"use strict";var r={appendParams:function(e,t){var i=[];Object.keys(t).forEach((function(e){null!==t[e]&&void 0!==t[e]&&i.push(e+"="+encodeURIComponent(t[e]))}));var r=i.join("&");return e=e.replace(/[?&]$/,""),e=-1===e.indexOf("?")?e+"?":e+"&",e+r}};t["a"]=r}}]);
//# sourceMappingURL=chunk-25ab1844.ce492aab.js.map