(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29cf3694"],{"0f62":function(t,e,i){"use strict";var a=i("9d79"),s=i("0258"),n=i("0511"),r=function(t){var e=t||{};n["a"].call(this,e),this.type=s["a"].IMAGE};a["a"].inherits(r,n["a"]),r.prototype.getSource,e["a"]=r},2350:function(t,e,i){"use strict";var a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};e["a"]=a},"24df":function(t,e,i){"use strict";var a=i("9d79"),s=i("4e0a"),n=i("5bc0"),r=i("1e8d"),o=i("8fc0"),h=i("0af5"),u=function(t,e,i,a,r,o){s["a"].call(this,t,e,i,n["a"].IDLE),this.src_=a,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.state=n["a"].IDLE,this.imageLoadFunction_=o};a["a"].inherits(u,s["a"]),u.prototype.getImage=function(){return this.image_},u.prototype.handleImageError_=function(){this.state=n["a"].ERROR,this.unlistenImage_(),this.changed()},u.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=h["a"].getHeight(this.extent)/this.image_.height),this.state=n["a"].LOADED,this.unlistenImage_(),this.changed()},u.prototype.load=function(){this.state!=n["a"].IDLE&&this.state!=n["a"].ERROR||(this.state=n["a"].LOADING,this.changed(),this.imageListenerKeys_=[r["a"].listenOnce(this.image_,o["a"].ERROR,this.handleImageError_,this),r["a"].listenOnce(this.image_,o["a"].LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},u.prototype.setImage=function(t){this.image_=t},u.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(r["a"].unlistenByKey),this.imageListenerKeys_=null};var c=u,g=i("92fa"),_=i("38f3"),l=i("256f"),p=i("3c81"),E=i("9f5e"),d=i("d60d"),m=i("c9f1"),R=function(t,e,i,r,o,u){this.targetProj_=e,this.maxSourceExtent_=t.getExtent();var c=e.getExtent(),g=c?h["a"].getIntersection(i,c):i,_=h["a"].getCenter(g),l=p["a"].calculateSourceResolution(t,e,_,r),E=a["a"].DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new m["a"](t,e,g,this.maxSourceExtent_,l*E),this.targetResolution_=r,this.targetExtent_=i;var d=this.triangulation_.calculateSourceExtent();this.sourceImage_=u(d,l,o),this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1,this.canvas_=null,this.sourceListenerKey_=null;var R=n["a"].LOADED;this.sourceImage_&&(R=n["a"].IDLE),s["a"].call(this,i,r,this.sourcePixelRatio_,R)};a["a"].inherits(R,s["a"]),R.prototype.disposeInternal=function(){this.state==n["a"].LOADING&&this.unlistenSource_(),s["a"].prototype.disposeInternal.call(this)},R.prototype.getImage=function(){return this.canvas_},R.prototype.getProjection=function(){return this.targetProj_},R.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==n["a"].LOADED){var e=h["a"].getWidth(this.targetExtent_)/this.targetResolution_,i=h["a"].getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=p["a"].render(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},R.prototype.load=function(){if(this.state==n["a"].IDLE){this.state=n["a"].LOADING,this.changed();var t=this.sourceImage_.getState();t==n["a"].LOADED||t==n["a"].ERROR?this.reproject_():(this.sourceListenerKey_=r["a"].listen(this.sourceImage_,o["a"].CHANGE,(function(t){var e=this.sourceImage_.getState();e!=n["a"].LOADED&&e!=n["a"].ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},R.prototype.unlistenSource_=function(){r["a"].unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null};var I=R,v=i("ef85"),f=function(t){v["a"].call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state}),this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0};a["a"].inherits(f,v["a"]),f.prototype.getResolutions=function(){return this.resolutions_},f.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=E["a"].linearFindNearest(this.resolutions_,t,0);t=this.resolutions_[e]}return t},f.prototype.getImage=function(t,e,i,s){var n=this.getProjection();if(a["a"].ENABLE_RASTER_REPROJECTION&&n&&s&&!l["a"].equivalent(n,s)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&l["a"].equivalent(this.reprojectedImage_.getProjection(),s)&&this.reprojectedImage_.getResolution()==e&&h["a"].equals(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new I(n,s,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,n)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return n&&(s=n),this.getImageInternal(t,e,i,s)},f.prototype.getImageInternal=function(t,e,i,a){},f.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case n["a"].LOADING:this.dispatchEvent(new f.Event(f.EventType_.IMAGELOADSTART,e));break;case n["a"].LOADED:this.dispatchEvent(new f.Event(f.EventType_.IMAGELOADEND,e));break;case n["a"].ERROR:this.dispatchEvent(new f.Event(f.EventType_.IMAGELOADERROR,e));break;default:}},f.defaultImageLoadFunction=function(t,e){t.getImage().src=e},f.Event=function(t,e){d["a"].call(this,t),this.image=e},a["a"].inherits(f.Event,d["a"]),f.EventType_={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};var S=f,O=i("2350"),A=i("b0c1"),L=i("c721"),y=function(t){var e=t||{};S.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:S.defaultImageLoadFunction,this.params_=e.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5};a["a"].inherits(y,S),y.GETFEATUREINFO_IMAGE_SIZE_=[101,101],y.prototype.getGetFeatureInfoUrl=function(t,e,i,s){if(void 0!==this.url_){var n=l["a"].get(i),r=this.getProjection();r&&r!==n&&(e=p["a"].calculateSourceResolution(r,n,t,e),t=l["a"].transform(t,n,r));var o=h["a"].getForViewAndSize(t,e,0,y.GETFEATUREINFO_IMAGE_SIZE_),u={SERVICE:"WMS",VERSION:a["a"].DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_["LAYERS"]};_["a"].assign(u,this.params_,s);var c=Math.floor((t[0]-o[0])/e),g=Math.floor((o[3]-t[1])/e);return u[this.v13_?"I":"X"]=c,u[this.v13_?"J":"Y"]=g,this.getRequestUrl_(o,y.GETFEATUREINFO_IMAGE_SIZE_,1,r||n,u)}},y.prototype.getParams=function(){return this.params_},y.prototype.getImageInternal=function(t,e,i,s){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var n=e/i,u=h["a"].getCenter(t),g=Math.ceil(h["a"].getWidth(t)/n),l=Math.ceil(h["a"].getHeight(t)/n),p=h["a"].getForViewAndSize(u,n,0,[g,l]),E=Math.ceil(this.ratio_*h["a"].getWidth(t)/n),d=Math.ceil(this.ratio_*h["a"].getHeight(t)/n),m=h["a"].getForViewAndSize(u,n,0,[E,d]),R=this.image_;if(R&&this.renderedRevision_==this.getRevision()&&R.getResolution()==e&&R.getPixelRatio()==i&&h["a"].containsExtent(R.getExtent(),p))return R;var I={SERVICE:"WMS",VERSION:a["a"].DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};_["a"].assign(I,this.params_),this.imageSize_[0]=Math.round(h["a"].getWidth(m)/n),this.imageSize_[1]=Math.round(h["a"].getHeight(m)/n);var v=this.getRequestUrl_(m,this.imageSize_,i,s,I);return this.image_=new c(m,e,i,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),r["a"].listen(this.image_,o["a"].CHANGE,this.handleImageChange,this),this.image_},y.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},y.prototype.getRequestUrl_=function(t,e,i,a,s){if(g["a"].assert(void 0!==this.url_,9),s[this.v13_?"CRS":"SRS"]=a.getCode(),"STYLES"in this.params_||(s["STYLES"]=""),1!=i)switch(this.serverType_){case O["a"].GEOSERVER:var n=90*i+.5|0;"FORMAT_OPTIONS"in s?s["FORMAT_OPTIONS"]+=";dpi:"+n:s["FORMAT_OPTIONS"]="dpi:"+n;break;case O["a"].MAPSERVER:s["MAP_RESOLUTION"]=90*i;break;case O["a"].CARMENTA_SERVER:case O["a"].QGIS:s["DPI"]=90*i;break;default:g["a"].assert(!1,8);break}s["WIDTH"]=e[0],s["HEIGHT"]=e[1];var r,o=a.getAxisOrientation();return r=this.v13_&&"ne"==o.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,s["BBOX"]=r.join(","),L["a"].appendParams(this.url_,s)},y.prototype.getUrl=function(){return this.url_},y.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},y.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},y.prototype.updateParams=function(t){_["a"].assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},y.prototype.updateV13_=function(){var t=this.params_["VERSION"]||a["a"].DEFAULT_WMS_VERSION;this.v13_=A["a"].compareVersions(t,"1.3")>=0};e["a"]=y},"9e9d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("GeoServer")]),e("el-breadcrumb-item",[t._v("加载WMS")])],1),e("el-card",[e("div",{attrs:{id:"map"}})])],1)},s=[],n=i("43df"),r=i("332e"),o=i("0f62"),h=i("24df"),u=i("21bc"),c={data:function(){return{}},created:function(){},mounted:function(){this.initMap()},methods:{initMap:function(){var t=new r["a"]({zoom:4,center:[267,38],projection:"EPSG:4326"}),e=new o["a"]({source:new h["a"]({ratio:1,url:"http://localhost:28081/geoserver/wms",params:{FORMAT:"image/png",VERSION:"1.1.1",LAYERS:"topp:states"}})});new n["a"]({controls:u["a"].defaults({attribution:!1}).extend([]),target:"map",layers:[e],view:t})}}},g=c,_=i("2877"),l=Object(_["a"])(g,a,s,!1,null,"e254a388",null);e["default"]=l.exports},c721:function(t,e,i){"use strict";var a={appendParams:function(t,e){var i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));var a=i.join("&");return t=t.replace(/[?&]$/,""),t=-1===t.indexOf("?")?t+"?":t+"&",t+a}};e["a"]=a}}]);
//# sourceMappingURL=chunk-29cf3694.14c9c30f.js.map