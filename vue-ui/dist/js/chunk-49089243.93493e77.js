(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49089243"],{"1c43":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"max-height":"640px"},attrs:{id:"map"}}),t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getQueryData,input:e.inputChange},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getFindData},slot:"append"})],1)],1),t("el-col",{attrs:{span:4}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addFeatures}},[e._v("添加")]),t("el-button",{attrs:{type:"primary"},on:{click:e.removeCheck}},[e._v("批量删除")])],1)],1),null!==e.datas?t("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,30,100],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),t("vxe-table",{ref:"xTable",staticClass:"mytable-style",attrs:{border:"",stripe:"","highlight-hover-row":"",data:e.datas,"edit-config":{trigger:"manual",mode:"row",autoClear:!1},size:"mini","row-class-name":e.rowClassName,"max-height":"350"}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{title:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.row;return[e.$refs.xTable.isActiveByRow(n)?[t("el-tooltip",{attrs:{effect:"dark",content:"保存",placement:"bottom"}},[t("el-button",{attrs:{type:"success",size:"mini",circle:"",icon:"el-icon-s-order"},on:{click:function(t){return e.saveRowEvent(n)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"取消",placement:"bottom"}},[t("el-button",{attrs:{type:"info",size:"mini",circle:"",icon:"el-icon-close"},on:{click:function(t){return e.cancelRowEvent(n)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[t("el-button",{attrs:{type:"danger",size:"mini",circle:"",icon:"el-icon-delete-solid"},on:{click:function(t){return e.removeEvent(n)}}})],1)]:[t("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"bottom"}},[t("el-button",{attrs:{circle:"",size:"mini",icon:"el-icon-setting"},on:{click:function(t){return e.editRowEvent(n)}}})],1)]]}}])}),e._l(e.queryInfo.fields,(function(r){return e.data[1]!==r?t("vxe-table-column",{attrs:{field:r,title:r,"min-width":"80px",height:"20px","show-header-overflow":"","show-overflow":"title","show-footer-overflow":"","edit-render":{name:"input",attrs:{type:"text"}}}}):e._e()}))],2),null===e.datas?t("el-empty",{attrs:{description:"无数据"}}):e._e()],1)],1)},o=[],a=r("c7eb"),i=r("1da1"),s=(r("b0c0"),r("d81d"),r("d3b7"),r("159b"),r("14d9"),r("5bc03"),r("43df")),u=r("332e"),c=r("4ca6"),l=r("e671"),h=r("8956"),p=r("02df"),d=r("76a3"),f=(r("14c4"),r("108b")),y=r("7269"),m=r("8d5e"),T=r("3e31"),_=r("3493"),g=r("3110"),w=r("61d6"),v=r("29ae"),x=r("0af5"),E={name:"Table",data:function(){return{data:[],datas:[],total:0,geoURL:"http://119.91.20.243:28081/",queryInfo:{tableName:"",geom:"",query:"",pageNum:1,pageSize:10,fields:[]},rowInfo:{tableName:"",geom:"",oldGeom:"",newRow:{},fields:[]},isFind:!1,isInput:!1,map:null,oldWKT:"",wktLayer:null,select:null,modify:null,draw:null,drawFeature:null,isDraw:!1}},created:function(){this.data=this.$route.params.name.split(","),this.queryInfo.tableName=this.data[0],this.queryInfo.geom=this.data[1]},mounted:function(){this.initMap(),this.getTableData()},methods:{initMap:function(){var e=this,t=new s["a"]({target:"map",layers:[new c["a"]({source:new h["a"],name:"OSM地图"})],view:new u["a"]({projection:"EPSG:3857",center:[12233037.3,4861921.87],zoom:5})});t.on("pointermove",(function(e){var r=t.getEventPixel(e.originalEvent),n=t.hasFeatureAtPixel(r);t.getTargetElement().style.cursor=n?"pointer":""})),t.addControl(new w["a"]);var r=new y["a"];this.select=r,t.addInteraction(r),r.on("select",(function(t){var r=t.selected,n=r[0].getProperties().info;e.rowInfo.oldGeom=n[e.queryInfo.geom].value,e.rowInfo.fields=e.queryInfo.fields,e.rowInfo.tableName=e.queryInfo.tableName,e.rowInfo.geom=e.queryInfo.geom,e.oldWKT=n.wkt;var o=e.$refs.xTable;e.addWKT([n]),o.setActiveRow(n),e.editFeatures(n)})),this.map=t},getTableData:function(){var e=this;return Object(i["a"])(Object(a["a"])().mark((function t(){var r,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isFind=!1,t.next=3,e.$API.getTableData(e.queryInfo);case 3:if(r=t.sent,n=r.data,200===n.status){t.next=7;break}return t.abrupt("return");case 7:e.datas=n.data.data,e.queryInfo.fields=n.data.fields,null===e.datas||0===e.datas.length?e.total=0:e.total=n.data.data[0].total,e.addWKT(e.datas);case 11:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pageNum=1,this.queryInfo.pageSize=e,this.isFind?this.getFindData():this.getTableData()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.isFind?this.getFindData():this.getTableData()},getQueryData:function(){this.queryInfo.pageNum=1,this.getTableData()},getFindData:function(){var e=this;return Object(i["a"])(Object(a["a"])().mark((function t(){var r,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isFind&&!e.isInput||(e.queryInfo.pageNum=1),e.isInput=!1,e.isFind=!0,t.next=5,e.$API.findTableData(e.queryInfo);case 5:if(r=t.sent,n=r.data,200===n.status){t.next=9;break}return t.abrupt("return");case 9:e.datas=n.data,null===e.datas||0===e.datas.length?e.total=0:e.total=n.data[0].total,e.addWKT(e.datas);case 12:case"end":return t.stop()}}),t)})))()},inputChange:function(){this.isInput=!0},styleFunction:function(e){var t=new v["a"]({radius:4,fill:new g["a"]({color:"rgb(255,0,0)"}),stroke:new _["a"]({color:"rgb(0,7,255)",width:1})}),r={Point:new T["a"]({image:t}),LineString:new T["a"]({stroke:new _["a"]({color:"rgb(255,89,0)",width:3})}),MultiLineString:new T["a"]({stroke:new _["a"]({color:"rgb(255,89,0)",width:3})}),MultiPoint:new T["a"]({image:t}),MultiPolygon:new T["a"]({stroke:new _["a"]({color:"yellow",width:1}),fill:new g["a"]({color:"rgba(255,255,0,0.29)"})}),Polygon:new T["a"]({stroke:new _["a"]({color:"blue",lineDash:[4],width:3}),fill:new g["a"]({color:"rgba(0,0,255,0.47)"})}),GeometryCollection:new T["a"]({stroke:new _["a"]({color:"rgb(208,0,255)",width:2}),fill:new g["a"]({color:"rgb(208,0,255)"}),image:new v["a"]({radius:10,fill:null,stroke:new _["a"]({color:"rgb(208,0,255)"})})}),Circle:new T["a"]({stroke:new _["a"]({color:"rgba(255,0,0,0.2)",width:2}),fill:new g["a"]({color:"rgba(255,0,0,0.2)"})})};return r[e.getGeometry().getType()]},addWKT:function(e){var t=this.map;if(t.removeLayer(this.wktLayer),null!==e){var r=new p["a"],n=[];e.forEach((function(e){var t=(new d["a"]).readFeature(e.wkt);t.setProperties({info:e}),n.push(t)})),r.addFeatures(n),this.wktLayer=new l["a"]({source:r,style:this.styleFunction}),t.addLayer(this.wktLayer);var o=r.getExtent(),a=t.getView().getResolutionForExtent(o,t.getSize());e.length>1?(t.getView().setResolution(a),t.getView().setCenter(x["a"].getCenter(o))):(t.getView().setCenter(x["a"].getCenter(o)),"Point"===this.data[2]?t.getView().setZoom(11):t.getView().setResolution(a))}},editFeatures:function(e){var t=this.map,r=new m["a"]({source:this.wktLayer.getSource()});t.addInteraction(r),r.on("modifyend",(function(t){var r=t.features,n=r.array_[0];e.wkt=(new d["a"]).writeFeature(n)})),this.modify=r},addFeatures:function(){var e=this;this.isDraw=!0;var t=this.map;this.select.setActive(!1);var r=new f["a"]({source:this.wktLayer.getSource(),type:this.data[2]});t.addInteraction(r);var n=this.$refs.xTable;r.on("drawend",function(){var o=Object(i["a"])(Object(a["a"])().mark((function o(i){var s,u;return Object(a["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.drawFeature=i.feature,o.next=3,n.insertAt({wkt:(new d["a"]).writeFeature(i.feature)},0);case 3:return s=o.sent,u=s.row,o.next=7,n.setActiveRow(u);case 7:e.editFeatures(u),t.removeInteraction(r);case 9:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())},removeCheck:function(){var e=this,t=this.$refs.xTable,r=t.getCheckboxRecords();0!==r.length?this.$confirm("此操作将永久删除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(Object(a["a"])().mark((function t(){var n,o,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],r.forEach((function(t){n.push(t[e.queryInfo.geom].value)})),t.next=4,e.$API.delTableData({tableName:e.queryInfo.tableName,geom:e.queryInfo.geom,oldGeom:n+"",newRow:{},fields:e.queryInfo.fields});case 4:if(o=t.sent,i=o.data,404!==i.status){t.next=8;break}return t.abrupt("return");case 8:return e.$message.success("删除成功！"),t.next=11,e.$refs.xTable.removeCheckboxRow();case 11:e.handleCurrentChange(1);case 12:case"end":return t.stop()}}),t)})))):this.$message.error("没有选中数据！")},editRowEvent:function(e){this.rowInfo.oldGeom=e[this.queryInfo.geom].value,this.rowInfo.fields=this.queryInfo.fields,this.rowInfo.tableName=this.queryInfo.tableName,this.rowInfo.geom=this.queryInfo.geom,this.oldWKT=e.wkt,this.isDraw=!1;var t=this.$refs.xTable;t.setActiveRow(e),this.addWKT([e]),this.editFeatures(e)},saveRowEvent:function(e){var t=this,r=this,n=this.$refs.xTable;n.clearActived().then(Object(i["a"])(Object(a["a"])().mark((function n(){var o,i,s,u;return Object(a["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.map.removeInteraction(r.modify),e[r.data[1]]=e.wkt,r.addWKT(r.datas),r.rowInfo.newRow=e,r.isDraw){n.next=14;break}return n.next=7,r.$API.updateTableData(r.rowInfo);case 7:if(o=n.sent,i=o.data,200===i.status){n.next=11;break}return n.abrupt("return");case 11:r.$message.success(i.msg),n.next=24;break;case 14:return r.rowInfo.fields=r.queryInfo.fields,r.rowInfo.geom=r.queryInfo.geom,r.rowInfo.tableName=r.queryInfo.tableName,n.next=19,r.$API.addTableData(r.rowInfo);case 19:if(s=n.sent,u=s.data,200===u.status){n.next=23;break}return n.abrupt("return");case 23:r.$message.success(u.msg);case 24:if(!t.isFind){n.next=29;break}return n.next=27,t.getFindData();case 27:n.next=31;break;case 29:return n.next=31,t.getTableData();case 31:case"end":return n.stop()}}),n)}))))},cancelRowEvent:function(e){var t=this,r=this.$refs.xTable;r.clearActived().then((function(){e.wkt=t.oldWKT,r.revertData(e),t.map.removeInteraction(t.modify),t.addWKT(t.datas)}))},removeEvent:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(Object(a["a"])().mark((function r(){var n,o;return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$API.delTableData(t.rowInfo);case 2:if(n=r.sent,o=n.data,404!==o.status){r.next=6;break}return r.abrupt("return");case 6:t.$message.success("删除成功！"),t.$refs.xTable.remove(e),t.handleCurrentChange(1);case 9:case"end":return r.stop()}}),r)}))))},rowClassName:function(){return"row-height"}},watch:{$route:{handler:function(e,t){this.data=e.params.name.split(","),this.queryInfo.tableName=this.data[0],this.queryInfo.geom=this.data[1],this.queryInfo.pageNum=1,this.getTableData()}}}},b=E,P=r("2877"),I=Object(P["a"])(b,n,o,!1,null,null,null);t["default"]=I.exports},"5bc03":function(e,t,r){},"61d6":function(e,t,r){"use strict";var n=r("9d79"),o=r("b49e"),a=r("92fa"),i=r("0ed9"),s={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},u=s,c=r("cd7e"),l=r("1e8d"),h=r("256f"),p=r("6077"),d=function(e){var t=e||{},r=void 0!==t.className?t.className:"ol-scale-line";this.innerElement_=document.createElement("DIV"),this.innerElement_.className=r+"-inner",this.element_=document.createElement("DIV"),this.element_.className=r+" "+c["a"].CLASS_UNSELECTABLE,this.element_.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="";var n=t.render?t.render:d.render;i["a"].call(this,{element:this.element_,render:n,target:t.target}),l["a"].listen(this,o["a"].getChangeEventType(d.Property_.UNITS),this.handleUnitsChanged_,this),this.setUnits(t.units||u.METRIC)};n["a"].inherits(d,i["a"]),d.LEADING_DIGITS=[1,2,5],d.prototype.getUnits=function(){return this.get(d.Property_.UNITS)},d.render=function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()},d.prototype.handleUnitsChanged_=function(){this.updateElement_()},d.prototype.setUnits=function(e){this.set(d.Property_.UNITS,e)},d.prototype.updateElement_=function(){var e=this.viewState_;if(e){var t=e.center,r=e.projection,n=this.getUnits(),o=n==u.DEGREES?p["a"].DEGREES:p["a"].METERS,i=h["a"].getPointResolution(r,e.resolution,t,o);n!=u.DEGREES&&(i*=r.getMetersPerUnit());var s=this.minWidth_*i,c="";if(n==u.DEGREES){var l=h["a"].METERS_PER_UNIT[p["a"].DEGREES];r.getUnits()==p["a"].DEGREES?s*=l:i/=l,s<l/60?(c="″",i*=3600):s<l?(c="′",i*=60):c="°"}else n==u.IMPERIAL?s<.9144?(c="in",i/=.0254):s<1609.344?(c="ft",i/=.3048):(c="mi",i/=1609.344):n==u.NAUTICAL?(i/=1852,c="nm"):n==u.METRIC?s<.001?(c="μm",i*=1e6):s<1?(c="mm",i*=1e3):s<1e3?c="m":(c="km",i/=1e3):n==u.US?s<.9144?(c="in",i*=39.37):s<1609.344?(c="ft",i/=.30480061):(c="mi",i/=1609.3472):a["a"].assert(!1,33);var f,y,m=3*Math.floor(Math.log(this.minWidth_*i)/Math.log(10));while(1){if(f=d.LEADING_DIGITS[(m%3+3)%3]*Math.pow(10,Math.floor(m/3)),y=Math.round(f/i),isNaN(y))return this.element_.style.display="none",void(this.renderedVisible_=!1);if(y>=this.minWidth_)break;++m}var T=f+" "+c;this.renderedHTML_!=T&&(this.innerElement_.innerHTML=T,this.renderedHTML_=T),this.renderedWidth_!=y&&(this.innerElement_.style.width=y+"px",this.renderedWidth_=y),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},d.Property_={UNITS:"units"};t["a"]=d},"76a3":function(e,t,r){"use strict";var n=r("9d79"),o=r("082b"),a=r("8237"),i=r("4921"),s=function(){a["a"].call(this)};n["a"].inherits(s,a["a"]),s.prototype.getText_=function(e){return"string"===typeof e?e:""},s.prototype.getType=function(){return i["a"].TEXT},s.prototype.readFeature=function(e,t){return this.readFeatureFromText(this.getText_(e),this.adaptOptions(t))},s.prototype.readFeatureFromText=function(e,t){},s.prototype.readFeatures=function(e,t){return this.readFeaturesFromText(this.getText_(e),this.adaptOptions(t))},s.prototype.readFeaturesFromText=function(e,t){},s.prototype.readGeometry=function(e,t){return this.readGeometryFromText(this.getText_(e),this.adaptOptions(t))},s.prototype.readGeometryFromText=function(e,t){},s.prototype.readProjection=function(e){return this.readProjectionFromText(this.getText_(e))},s.prototype.readProjectionFromText=function(e){return this.defaultDataProjection},s.prototype.writeFeature=function(e,t){return this.writeFeatureText(e,this.adaptOptions(t))},s.prototype.writeFeatureText=function(e,t){},s.prototype.writeFeatures=function(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))},s.prototype.writeFeaturesText=function(e,t){},s.prototype.writeGeometry=function(e,t){return this.writeGeometryText(e,this.adaptOptions(t))},s.prototype.writeGeometryText=function(e,t){};var u=s,c=r("8a2e"),l=r("e526"),h=r("6a24"),p=r("12bd"),d=r("d5d3"),f=r("cdc1"),y=r("db9f"),m=r("d1cc"),T=r("09d8"),_=r("b208"),g=function(e){var t=e||{};u.call(this),this.splitCollection_=void 0!==t.splitCollection&&t.splitCollection};n["a"].inherits(g,u),g.EMPTY="EMPTY",g.Z="Z",g.M="M",g.ZM="ZM",g.encodePointGeometry_=function(e){var t=e.getCoordinates();return 0===t.length?"":t.join(" ")},g.encodeMultiPointGeometry_=function(e){for(var t=[],r=e.getPoints(),n=0,o=r.length;n<o;++n)t.push("("+g.encodePointGeometry_(r[n])+")");return t.join(",")},g.encodeGeometryCollectionGeometry_=function(e){for(var t=[],r=e.getGeometries(),n=0,o=r.length;n<o;++n)t.push(g.encode_(r[n]));return t.join(",")},g.encodeLineStringGeometry_=function(e){for(var t=e.getCoordinates(),r=[],n=0,o=t.length;n<o;++n)r.push(t[n].join(" "));return r.join(",")},g.encodeMultiLineStringGeometry_=function(e){for(var t=[],r=e.getLineStrings(),n=0,o=r.length;n<o;++n)t.push("("+g.encodeLineStringGeometry_(r[n])+")");return t.join(",")},g.encodePolygonGeometry_=function(e){for(var t=[],r=e.getLinearRings(),n=0,o=r.length;n<o;++n)t.push("("+g.encodeLineStringGeometry_(r[n])+")");return t.join(",")},g.encodeMultiPolygonGeometry_=function(e){for(var t=[],r=e.getPolygons(),n=0,o=r.length;n<o;++n)t.push("("+g.encodePolygonGeometry_(r[n])+")");return t.join(",")},g.encodeGeometryLayout_=function(e){var t=e.getLayout(),r="";return t!==h["a"].XYZ&&t!==h["a"].XYZM||(r+=g.Z),t!==h["a"].XYM&&t!==h["a"].XYZM||(r+=g.M),r},g.encode_=function(e){var t=e.getType(),r=g.GeometryEncoder_[t],n=r(e);if(t=t.toUpperCase(),e instanceof _["a"]){var o=g.encodeGeometryLayout_(e);o.length>0&&(t+=" "+o)}return 0===n.length?t+" "+g.EMPTY:t+"("+n+")"},g.GeometryEncoder_={Point:g.encodePointGeometry_,LineString:g.encodeLineStringGeometry_,Polygon:g.encodePolygonGeometry_,MultiPoint:g.encodeMultiPointGeometry_,MultiLineString:g.encodeMultiLineStringGeometry_,MultiPolygon:g.encodeMultiPolygonGeometry_,GeometryCollection:g.encodeGeometryCollectionGeometry_},g.prototype.parse_=function(e){var t=new g.Lexer(e),r=new g.Parser(t);return r.parse()},g.prototype.readFeature,g.prototype.readFeatureFromText=function(e,t){var r=this.readGeometryFromText(e,t);if(r){var n=new o["a"];return n.setGeometry(r),n}return null},g.prototype.readFeatures,g.prototype.readFeaturesFromText=function(e,t){var r=[],n=this.readGeometryFromText(e,t);r=this.splitCollection_&&n.getType()==l["a"].GEOMETRY_COLLECTION?n.getGeometriesArray():[n];for(var a,i=[],s=0,u=r.length;s<u;++s)a=new o["a"],a.setGeometry(r[s]),i.push(a);return i},g.prototype.readGeometry,g.prototype.readGeometryFromText=function(e,t){var r=this.parse_(e);return r?a["a"].transformWithOptions(r,!1,t):null},g.prototype.writeFeature,g.prototype.writeFeatureText=function(e,t){var r=e.getGeometry();return r?this.writeGeometryText(r,t):""},g.prototype.writeFeatures,g.prototype.writeFeaturesText=function(e,t){if(1==e.length)return this.writeFeatureText(e[0],t);for(var r=[],n=0,o=e.length;n<o;++n)r.push(e[n].getGeometry());var a=new c["a"](r);return this.writeGeometryText(a,t)},g.prototype.writeGeometry,g.prototype.writeGeometryText=function(e,t){return g.encode_(a["a"].transformWithOptions(e,!0,t))},g.TokenType_={TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},g.Lexer=function(e){this.wkt=e,this.index_=-1},g.Lexer.prototype.isAlpha_=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"},g.Lexer.prototype.isNumeric_=function(e,t){var r=void 0!==t&&t;return e>="0"&&e<="9"||"."==e&&!r},g.Lexer.prototype.isWhiteSpace_=function(e){return" "==e||"\t"==e||"\r"==e||"\n"==e},g.Lexer.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},g.Lexer.prototype.nextToken=function(){var e=this.nextChar_(),t={position:this.index_,value:e};if("("==e)t.type=g.TokenType_.LEFT_PAREN;else if(","==e)t.type=g.TokenType_.COMMA;else if(")"==e)t.type=g.TokenType_.RIGHT_PAREN;else if(this.isNumeric_(e)||"-"==e)t.type=g.TokenType_.NUMBER,t.value=this.readNumber_();else if(this.isAlpha_(e))t.type=g.TokenType_.TEXT,t.value=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t.type=g.TokenType_.EOF}return t},g.Lexer.prototype.readNumber_=function(){var e,t=this.index_,r=!1,n=!1;do{"."==e?r=!0:"e"!=e&&"E"!=e||(n=!0),e=this.nextChar_()}while(this.isNumeric_(e,r)||!n&&("e"==e||"E"==e)||n&&("-"==e||"+"==e));return parseFloat(this.wkt.substring(t,this.index_--))},g.Lexer.prototype.readText_=function(){var e,t=this.index_;do{e=this.nextChar_()}while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()},g.Parser=function(e){this.lexer_=e,this.token_,this.layout_=h["a"].XY},g.Parser.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},g.Parser.prototype.isTokenType=function(e){var t=this.token_.type==e;return t},g.Parser.prototype.match=function(e){var t=this.isTokenType(e);return t&&this.consume_(),t},g.Parser.prototype.parse=function(){this.consume_();var e=this.parseGeometry_();return e},g.Parser.prototype.parseGeometryLayout_=function(){var e=h["a"].XY,t=this.token_;if(this.isTokenType(g.TokenType_.TEXT)){var r=t.value;r===g.Z?e=h["a"].XYZ:r===g.M?e=h["a"].XYM:r===g.ZM&&(e=h["a"].XYZM),e!==h["a"].XY&&this.consume_()}return e},g.Parser.prototype.parseGeometry_=function(){var e=this.token_;if(this.match(g.TokenType_.TEXT)){var t=e.value;if(this.layout_=this.parseGeometryLayout_(),t==l["a"].GEOMETRY_COLLECTION.toUpperCase()){var r=this.parseGeometryCollectionText_();return new c["a"](r)}var n=g.Parser.GeometryParser_[t],o=g.Parser.GeometryConstructor_[t];if(!n||!o)throw new Error("Invalid geometry type: "+t);var a=n.call(this);return new o(a,this.layout_)}throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parseGeometryCollectionText_=function(){if(this.match(g.TokenType_.LEFT_PAREN)){var e=[];do{e.push(this.parseGeometry_())}while(this.match(g.TokenType_.COMMA));if(this.match(g.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parsePointText_=function(){if(this.match(g.TokenType_.LEFT_PAREN)){var e=this.parsePoint_();if(this.match(g.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parseLineStringText_=function(){if(this.match(g.TokenType_.LEFT_PAREN)){var e=this.parsePointList_();if(this.match(g.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parsePolygonText_=function(){if(this.match(g.TokenType_.LEFT_PAREN)){var e=this.parseLineStringTextList_();if(this.match(g.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parseMultiPointText_=function(){var e;if(this.match(g.TokenType_.LEFT_PAREN)){if(e=this.token_.type==g.TokenType_.LEFT_PAREN?this.parsePointTextList_():this.parsePointList_(),this.match(g.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parseMultiLineStringText_=function(){if(this.match(g.TokenType_.LEFT_PAREN)){var e=this.parseLineStringTextList_();if(this.match(g.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parseMultiPolygonText_=function(){if(this.match(g.TokenType_.LEFT_PAREN)){var e=this.parsePolygonTextList_();if(this.match(g.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parsePoint_=function(){for(var e=[],t=this.layout_.length,r=0;r<t;++r){var n=this.token_;if(!this.match(g.TokenType_.NUMBER))break;e.push(n.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())},g.Parser.prototype.parsePointList_=function(){var e=[this.parsePoint_()];while(this.match(g.TokenType_.COMMA))e.push(this.parsePoint_());return e},g.Parser.prototype.parsePointTextList_=function(){var e=[this.parsePointText_()];while(this.match(g.TokenType_.COMMA))e.push(this.parsePointText_());return e},g.Parser.prototype.parseLineStringTextList_=function(){var e=[this.parseLineStringText_()];while(this.match(g.TokenType_.COMMA))e.push(this.parseLineStringText_());return e},g.Parser.prototype.parsePolygonTextList_=function(){var e=[this.parsePolygonText_()];while(this.match(g.TokenType_.COMMA))e.push(this.parsePolygonText_());return e},g.Parser.prototype.isEmptyGeometry_=function(){var e=this.isTokenType(g.TokenType_.TEXT)&&this.token_.value==g.EMPTY;return e&&this.consume_(),e},g.Parser.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},g.Parser.GeometryConstructor_={POINT:m["a"],LINESTRING:p["a"],POLYGON:T["a"],MULTIPOINT:f["a"],MULTILINESTRING:d["a"],MULTIPOLYGON:y["a"]},g.Parser.GeometryParser_={POINT:g.Parser.prototype.parsePointText_,LINESTRING:g.Parser.prototype.parseLineStringText_,POLYGON:g.Parser.prototype.parsePolygonText_,MULTIPOINT:g.Parser.prototype.parseMultiPointText_,MULTILINESTRING:g.Parser.prototype.parseMultiLineStringText_,MULTIPOLYGON:g.Parser.prototype.parseMultiPolygonText_};t["a"]=g},8956:function(e,t,r){"use strict";var n=r("9d79"),o=r("403d"),a=function(e){var t,r=e||{};t=void 0!==r.attributions?r.attributions:[a.ATTRIBUTION];var n=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",i=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";o["a"].call(this,{attributions:t,cacheSize:r.cacheSize,crossOrigin:n,opaque:void 0===r.opaque||r.opaque,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,url:i,wrapX:r.wrapX})};n["a"].inherits(a,o["a"]),a.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',t["a"]=a}}]);
//# sourceMappingURL=chunk-49089243.93493e77.js.map