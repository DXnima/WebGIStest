(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e56ac5c"],{"108b":function(t,e,i){"use strict";var s=i("9d79"),o=i("082b"),n=i("78d6"),h=i("b49e"),a=i("a568"),r=i("1e8d"),d=i("d60d"),_=i("06f8"),c=i("0af5"),u=i("57cb"),l=i("3388"),f=i("e526"),p=i("12bd"),C=i("d5d3"),g=i("cdc1"),y=i("db9f"),k=i("d1cc"),m=i("09d8"),v={DRAWSTART:"drawstart",DRAWEND:"drawend"},L=v,P=i("d1cd"),N=i("f950"),w=i("e671"),T=i("02df"),E=i("3e31"),F=function(t){P["a"].call(this,{handleDownEvent:F.handleDownEvent_,handleEvent:F.handleEvent,handleUpEvent:F.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=F.getMode_(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===F.Mode_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:u["a"].TRUE;var e=t.geometryFunction;if(!e)if(this.type_===f["a"].CIRCLE)e=function(t,e){var i=e||new l["a"]([NaN,NaN]),s=a["a"].squaredDistance(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(s)),i};else{var i,s=this.mode_;s===F.Mode_.POINT?i=k["a"]:s===F.Mode_.LINE_STRING?i=p["a"]:s===F.Mode_.POLYGON&&(i=m["a"]),e=function(t,e){var o=e;return o?s===F.Mode_.POLYGON?t[0].length?o.setCoordinates([t[0].concat([t[0][0]])]):o.setCoordinates([]):o.setCoordinates(t):o=new i(t),o}}this.geometryFunction_=e,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new w["a"]({source:new T["a"]({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:F.getDefaultStyleFunction()}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:_["a"].noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=_["a"].always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:_["a"].shiftKeyOnly,r["a"].listen(this,h["a"].getChangeEventType(N["a"].ACTIVE),this.updateState_,this)};s["a"].inherits(F,P["a"]),F.getDefaultStyleFunction=function(){var t=E["a"].createDefaultEditing();return function(e,i){return t[e.getGeometry().getType()]}},F.prototype.setMap=function(t){P["a"].prototype.setMap.call(this,t),this.updateState_()},F.handleEvent=function(t){this.freehand_=this.mode_!==F.Mode_.POINT&&this.freehandCondition_(t);var e=!0;return this.freehand_&&t.type===n["a"].POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),e=!1):this.freehand_&&t.type===n["a"].POINTERDOWN?e=!1:t.type===n["a"].POINTERMOVE?e=this.handlePointerMove_(t):t.type===n["a"].DBLCLICK&&(e=!1),P["a"].handleEvent.call(this,t)&&e},F.handleDownEvent_=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.downPx_=t.pixel,!0)},F.handleUpEvent_=function(t){var e=!0;this.handlePointerMove_(t);var i=this.mode_===F.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===F.Mode_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},F.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,s=e[0]-i[0],o=e[1]-i[1],n=s*s+o*o;this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},F.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,s=[this.finishCoordinate_];if(this.mode_===F.Mode_.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===F.Mode_.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,s=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var o=t.map,n=0,h=s.length;n<h;n++){var a=s[n],r=o.getPixelFromCoordinate(a),d=t.pixel,_=d[0]-r[0],c=d[1]-r[1],u=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(_*_+c*c)<=u,e){this.finishCoordinate_=a;break}}}return e},F.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(this.sketchPoint_){var i=this.sketchPoint_.getGeometry();i.setCoordinates(e)}else this.sketchPoint_=new o["a"](new k["a"](e)),this.updateSketchFeatures_()},F.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===F.Mode_.POINT?this.sketchCoords_=e.slice():this.mode_===F.Mode_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[e.slice(),e.slice()],this.mode_===F.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new o["a"](new p["a"](this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o["a"],this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new F.Event(L.DRAWSTART,this.sketchFeature_))},F.prototype.modifyDrawing_=function(t){var e,i,s,n=t.coordinate,h=this.sketchFeature_.getGeometry();if(this.mode_===F.Mode_.POINT?i=this.sketchCoords_:this.mode_===F.Mode_.POLYGON?(e=this.sketchCoords_[0],i=e[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):(e=this.sketchCoords_,i=e[e.length-1]),i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,h),this.sketchPoint_){var a=this.sketchPoint_.getGeometry();a.setCoordinates(n)}if(h instanceof m["a"]&&this.mode_!==F.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new o["a"](new p["a"](null)));var r=h.getLinearRing(0);s=this.sketchLine_.getGeometry(),s.setFlatCoordinates(r.getLayout(),r.getFlatCoordinates())}else this.sketchLineCoords_&&(s=this.sketchLine_.getGeometry(),s.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()},F.prototype.addToDrawing_=function(t){var e,i,s=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===F.Mode_.LINE_STRING?(this.finishCoordinate_=s.slice(),i=this.sketchCoords_,i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),this.geometryFunction_(i,o)):this.mode_===F.Mode_.POLYGON&&(i=this.sketchCoords_[0],i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},F.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e,i=this.sketchFeature_.getGeometry();this.mode_===F.Mode_.LINE_STRING?(t=this.sketchCoords_,t.splice(-2,1),this.geometryFunction_(t,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===F.Mode_.POLYGON&&(t=this.sketchCoords_[0],t.splice(-2,1),e=this.sketchLine_.getGeometry(),e.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,i)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},F.prototype.finishDrawing=function(){var t=this.abortDrawing_(),e=this.sketchCoords_,i=t.getGeometry();this.mode_===F.Mode_.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===F.Mode_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===f["a"].MULTI_POINT?t.setGeometry(new g["a"]([e])):this.type_===f["a"].MULTI_LINE_STRING?t.setGeometry(new C["a"]([e])):this.type_===f["a"].MULTI_POLYGON&&t.setGeometry(new y["a"]([e])),this.dispatchEvent(new F.Event(L.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},F.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},F.prototype.extend=function(t){var e=t.getGeometry(),i=e;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new F.Event(L.DRAWSTART,this.sketchFeature_))},F.prototype.shouldStopEvent=u["a"].FALSE,F.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},F.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},F.createRegularPolygon=function(t,e){return function(i,s){var o=i[0],n=i[1],h=Math.sqrt(a["a"].squaredDistance(o,n)),r=s||m["a"].fromCircle(new l["a"](o),t),d=e||Math.atan((n[1]-o[1])/(n[0]-o[0]));return m["a"].makeRegular(r,o,h,d),r}},F.createBox=function(){return function(t,e){var i=c["a"].boundingExtent(t),s=e||new m["a"](null);return s.setCoordinates([[c["a"].getBottomLeft(i),c["a"].getBottomRight(i),c["a"].getTopRight(i),c["a"].getTopLeft(i),c["a"].getBottomLeft(i)]]),s}},F.getMode_=function(t){var e;return t===f["a"].POINT||t===f["a"].MULTI_POINT?e=F.Mode_.POINT:t===f["a"].LINE_STRING||t===f["a"].MULTI_LINE_STRING?e=F.Mode_.LINE_STRING:t===f["a"].POLYGON||t===f["a"].MULTI_POLYGON?e=F.Mode_.POLYGON:t===f["a"].CIRCLE&&(e=F.Mode_.CIRCLE),e},F.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},F.Event=function(t,e){d["a"].call(this,t),this.feature=e},s["a"].inherits(F.Event,d["a"]);e["a"]=F},3388:function(t,e,i){"use strict";var s=i("9d79"),o=i("0af5"),n=i("6a24"),h=i("e526"),a=i("b208"),r=i("abb7"),d=function(t,e,i){a["a"].call(this);var s=e||0;this.setCenterAndRadius(t,s,i)};s["a"].inherits(d,a["a"]),d.prototype.clone=function(){var t=new d(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},d.prototype.closestPointXY=function(t,e,i,s){var o=this.flatCoordinates,n=t-o[0],h=e-o[1],a=n*n+h*h;if(a<s){var r;if(0===a)for(r=0;r<this.stride;++r)i[r]=o[r];else{var d=this.getRadius()/Math.sqrt(a);for(i[0]=o[0]+d*n,i[1]=o[1]+d*h,r=2;r<this.stride;++r)i[r]=o[r]}return i.length=this.stride,a}return s},d.prototype.containsXY=function(t,e){var i=this.flatCoordinates,s=t-i[0],o=e-i[1];return s*s+o*o<=this.getRadiusSquared_()},d.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},d.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return o["a"].createOrUpdate(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},d.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},d.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},d.prototype.getType=function(){return h["a"].CIRCLE},d.prototype.intersectsExtent=function(t){var e=this.getExtent();if(o["a"].intersects(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||o["a"].forEachCorner(t,this.intersectsCoordinate,this))}return!1},d.prototype.setCenter=function(t){var e,i=this.stride,s=this.flatCoordinates[i]-this.flatCoordinates[0],o=t.slice();for(o[i]=o[0]+s,e=1;e<i;++e)o[i+e]=t[e];this.setFlatCoordinates(this.layout,o)},d.prototype.setCenterAndRadius=function(t,e,i){if(t){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var s,o,h=this.flatCoordinates,a=r["a"].coordinate(h,0,t,this.stride);for(h[a++]=h[0]+e,s=1,o=this.stride;s<o;++s)h[a++]=h[s];h.length=a,this.changed()}else this.setFlatCoordinates(n["a"].XY,null)},d.prototype.getCoordinates=function(){},d.prototype.setCoordinates=function(t,e){},d.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},d.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},d.prototype.transform,e["a"]=d}}]);
//# sourceMappingURL=chunk-5e56ac5c.d247204d.js.map