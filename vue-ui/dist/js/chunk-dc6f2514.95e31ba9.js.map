{"version":3,"sources":["webpack:///./node_modules/ol/format/textfeature.js","webpack:///./node_modules/ol/format/wkt.js","webpack:///./node_modules/ol/style/text.js","webpack:///./src/components/openlayers/LayerEdit.vue?cc2a","webpack:///./src/components/openlayers/LayerEdit.vue","webpack:///src/components/openlayers/LayerEdit.vue","webpack:///./src/components/openlayers/LayerEdit.vue?83f8","webpack:///./src/components/openlayers/LayerEdit.vue?402c"],"names":["_ol_format_TextFeature_","call","this","inherits","prototype","getText_","source","getType","TEXT","readFeature","opt_options","readFeatureFromText","adaptOptions","text","readFeatures","readFeaturesFromText","readGeometry","readGeometryFromText","readProjection","readProjectionFromText","defaultDataProjection","writeFeature","feature","writeFeatureText","writeFeatures","features","writeFeaturesText","writeGeometry","geometry","writeGeometryText","_ol_format_WKT_","options","splitCollection_","undefined","splitCollection","EMPTY","Z","M","ZM","encodePointGeometry_","geom","coordinates","getCoordinates","length","join","encodeMultiPointGeometry_","array","components","getPoints","i","ii","push","encodeGeometryCollectionGeometry_","geoms","getGeometries","encode_","encodeLineStringGeometry_","encodeMultiLineStringGeometry_","getLineStrings","encodePolygonGeometry_","rings","getLinearRings","encodeMultiPolygonGeometry_","getPolygons","encodeGeometryLayout_","layout","getLayout","dimInfo","XYZ","XYZM","XYM","type","geometryEncoder","GeometryEncoder_","enc","toUpperCase","parse_","wkt","lexer","Lexer","parser","Parser","parse","setGeometry","geometries","GEOMETRY_COLLECTION","getGeometriesArray","transformWithOptions","getGeometry","collection","TokenType_","LEFT_PAREN","RIGHT_PAREN","NUMBER","COMMA","EOF","index_","isAlpha_","c","isNumeric_","opt_decimal","decimal","isWhiteSpace_","nextChar_","charAt","nextToken","token","position","value","readNumber_","readText_","Error","index","scientificNotation","parseFloat","substring","lexer_","token_","layout_","XY","consume_","isTokenType","isMatch","match","parseGeometry_","parseGeometryLayout_","dimToken","geomType","parseGeometryCollectionText_","GeometryParser_","ctor","GeometryConstructor_","formatErrorMessage_","isEmptyGeometry_","parsePointText_","parsePoint_","parseLineStringText_","parsePointList_","parsePolygonText_","parseLineStringTextList_","parseMultiPointText_","parsePointTextList_","parseMultiLineStringText_","parseMultiPolygonText_","parsePolygonTextList_","dimensions","isEmpty","_ol_style_Text_","font_","font","rotation_","rotation","rotateWithView_","rotateWithView","scale_","scale","text_","textAlign_","textAlign","textBaseline_","textBaseline","fill_","fill","color","DEFAULT_FILL_COLOR_","maxAngle_","maxAngle","Math","PI","placement_","placement","POINT","overflow","exceedLength","overflow_","stroke_","stroke","offsetX_","offsetX","offsetY_","offsetY","backgroundFill_","backgroundFill","backgroundStroke_","backgroundStroke","padding_","padding","clone","getFont","getPlacement","getMaxAngle","getOverflow","getRotation","getRotateWithView","getScale","getText","getTextAlign","getTextBaseline","getFill","getStroke","getOffsetX","getOffsetY","getBackgroundFill","getBackgroundStroke","getPadding","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setFill","setRotation","setScale","setStroke","setText","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","render","_vm","_c","_self","attrs","path","_v","staticClass","on","$event","liClick","submitClick","editSave","editClose","staticRenderFns","data","map","element","editInfoDoc","draw","select","edit","created","mounted","initMap","methods","toolsDoc","document","getElementById","classList","add","getElementsByClassName","editNameDoc","that","Vector","vector","VectorLayer","style","styleFunction","Map","controls","control","defaults","attribution","target","layers","getTdtLayer","view","View","center","proj","fromLonLat","zoom","minZoom","maxZoom","addFeatures","Select","Modify","getFeatures","e","selected","startEdit","deSelectEvt","addInteraction","setActive","evt","hasFeatureAtPixel","pixel","getTargetElement","cursor","event","docm","console","log","contains","_type","isActive","remove","display","getActive","confirm","editName","alert","saveEdit","addDrawTool","name","selectFeatures","selectFeature","item","WKTGeo","WKT","paras","$API","addLayerEdit","clear","getLength","removeInteraction","Draw","stopClick","freehand","attr","id","insertAt","children","removeClass","feture","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$_this$$API$get","result","_r","wrap","_context","prev","next","getLayerEdit","sent","changed","stop","isSelect","Stroke","width","Fill","_name","_color","get","Style","image","Circle","radius","Text","component"],"mappings":"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","file":"js/chunk-dc6f2514.95e31ba9.js","sourcesContent":["import _ol_ from '../index.js';\nimport _ol_format_Feature_ from '../format/feature.js';\nimport _ol_format_FormatType_ from '../format/formattype.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for text feature formats.\n *\n * @constructor\n * @abstract\n * @extends {ol.format.Feature}\n */\nvar _ol_format_TextFeature_ = function() {\n  _ol_format_Feature_.call(this);\n};\n\n_ol_.inherits(_ol_format_TextFeature_, _ol_format_Feature_);\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @private\n * @return {string} Text.\n */\n_ol_format_TextFeature_.prototype.getText_ = function(source) {\n  if (typeof source === 'string') {\n    return source;\n  } else {\n    return '';\n  }\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_TextFeature_.prototype.getType = function() {\n  return _ol_format_FormatType_.TEXT;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_TextFeature_.prototype.readFeature = function(source, opt_options) {\n  return this.readFeatureFromText(\n      this.getText_(source), this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {string} text Text.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @protected\n * @return {ol.Feature} Feature.\n */\n_ol_format_TextFeature_.prototype.readFeatureFromText = function(text, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_TextFeature_.prototype.readFeatures = function(source, opt_options) {\n  return this.readFeaturesFromText(\n      this.getText_(source), this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {string} text Text.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @protected\n * @return {Array.<ol.Feature>} Features.\n */\n_ol_format_TextFeature_.prototype.readFeaturesFromText = function(text, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_TextFeature_.prototype.readGeometry = function(source, opt_options) {\n  return this.readGeometryFromText(\n      this.getText_(source), this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {string} text Text.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @protected\n * @return {ol.geom.Geometry} Geometry.\n */\n_ol_format_TextFeature_.prototype.readGeometryFromText = function(text, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_TextFeature_.prototype.readProjection = function(source) {\n  return this.readProjectionFromText(this.getText_(source));\n};\n\n\n/**\n * @param {string} text Text.\n * @protected\n * @return {ol.proj.Projection} Projection.\n */\n_ol_format_TextFeature_.prototype.readProjectionFromText = function(text) {\n  return this.defaultDataProjection;\n};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_TextFeature_.prototype.writeFeature = function(feature, opt_options) {\n  return this.writeFeatureText(feature, this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {ol.Feature} feature Features.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @protected\n * @return {string} Text.\n */\n_ol_format_TextFeature_.prototype.writeFeatureText = function(feature, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_TextFeature_.prototype.writeFeatures = function(\n    features, opt_options) {\n  return this.writeFeaturesText(features, this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @protected\n * @return {string} Text.\n */\n_ol_format_TextFeature_.prototype.writeFeaturesText = function(features, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\n_ol_format_TextFeature_.prototype.writeGeometry = function(\n    geometry, opt_options) {\n  return this.writeGeometryText(geometry, this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @protected\n * @return {string} Text.\n */\n_ol_format_TextFeature_.prototype.writeGeometryText = function(geometry, opt_options) {};\nexport default _ol_format_TextFeature_;\n","import _ol_ from '../index.js';\nimport _ol_Feature_ from '../feature.js';\nimport _ol_format_Feature_ from '../format/feature.js';\nimport _ol_format_TextFeature_ from '../format/textfeature.js';\nimport _ol_geom_GeometryCollection_ from '../geom/geometrycollection.js';\nimport _ol_geom_GeometryType_ from '../geom/geometrytype.js';\nimport _ol_geom_GeometryLayout_ from '../geom/geometrylayout.js';\nimport _ol_geom_LineString_ from '../geom/linestring.js';\nimport _ol_geom_MultiLineString_ from '../geom/multilinestring.js';\nimport _ol_geom_MultiPoint_ from '../geom/multipoint.js';\nimport _ol_geom_MultiPolygon_ from '../geom/multipolygon.js';\nimport _ol_geom_Point_ from '../geom/point.js';\nimport _ol_geom_Polygon_ from '../geom/polygon.js';\nimport _ol_geom_SimpleGeometry_ from '../geom/simplegeometry.js';\n\n/**\n * @classdesc\n * Geometry format for reading and writing data in the `WellKnownText` (WKT)\n * format.\n *\n * @constructor\n * @extends {ol.format.TextFeature}\n * @param {olx.format.WKTOptions=} opt_options Options.\n * @api\n */\nvar _ol_format_WKT_ = function(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  _ol_format_TextFeature_.call(this);\n\n  /**\n   * Split GeometryCollection into multiple features.\n   * @type {boolean}\n   * @private\n   */\n  this.splitCollection_ = options.splitCollection !== undefined ?\n    options.splitCollection : false;\n\n};\n\n_ol_.inherits(_ol_format_WKT_, _ol_format_TextFeature_);\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_format_WKT_.EMPTY = 'EMPTY';\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_format_WKT_.Z = 'Z';\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_format_WKT_.M = 'M';\n\n\n/**\n * @const\n * @type {string}\n */\n_ol_format_WKT_.ZM = 'ZM';\n\n\n/**\n * @param {ol.geom.Point} geom Point geometry.\n * @return {string} Coordinates part of Point as WKT.\n * @private\n */\n_ol_format_WKT_.encodePointGeometry_ = function(geom) {\n  var coordinates = geom.getCoordinates();\n  if (coordinates.length === 0) {\n    return '';\n  }\n  return coordinates.join(' ');\n};\n\n\n/**\n * @param {ol.geom.MultiPoint} geom MultiPoint geometry.\n * @return {string} Coordinates part of MultiPoint as WKT.\n * @private\n */\n_ol_format_WKT_.encodeMultiPointGeometry_ = function(geom) {\n  var array = [];\n  var components = geom.getPoints();\n  for (var i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + _ol_format_WKT_.encodePointGeometry_(components[i]) + ')');\n  }\n  return array.join(',');\n};\n\n\n/**\n * @param {ol.geom.GeometryCollection} geom GeometryCollection geometry.\n * @return {string} Coordinates part of GeometryCollection as WKT.\n * @private\n */\n_ol_format_WKT_.encodeGeometryCollectionGeometry_ = function(geom) {\n  var array = [];\n  var geoms = geom.getGeometries();\n  for (var i = 0, ii = geoms.length; i < ii; ++i) {\n    array.push(_ol_format_WKT_.encode_(geoms[i]));\n  }\n  return array.join(',');\n};\n\n\n/**\n * @param {ol.geom.LineString|ol.geom.LinearRing} geom LineString geometry.\n * @return {string} Coordinates part of LineString as WKT.\n * @private\n */\n_ol_format_WKT_.encodeLineStringGeometry_ = function(geom) {\n  var coordinates = geom.getCoordinates();\n  var array = [];\n  for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n    array.push(coordinates[i].join(' '));\n  }\n  return array.join(',');\n};\n\n\n/**\n * @param {ol.geom.MultiLineString} geom MultiLineString geometry.\n * @return {string} Coordinates part of MultiLineString as WKT.\n * @private\n */\n_ol_format_WKT_.encodeMultiLineStringGeometry_ = function(geom) {\n  var array = [];\n  var components = geom.getLineStrings();\n  for (var i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + _ol_format_WKT_.encodeLineStringGeometry_(\n        components[i]) + ')');\n  }\n  return array.join(',');\n};\n\n\n/**\n * @param {ol.geom.Polygon} geom Polygon geometry.\n * @return {string} Coordinates part of Polygon as WKT.\n * @private\n */\n_ol_format_WKT_.encodePolygonGeometry_ = function(geom) {\n  var array = [];\n  var rings = geom.getLinearRings();\n  for (var i = 0, ii = rings.length; i < ii; ++i) {\n    array.push('(' + _ol_format_WKT_.encodeLineStringGeometry_(\n        rings[i]) + ')');\n  }\n  return array.join(',');\n};\n\n\n/**\n * @param {ol.geom.MultiPolygon} geom MultiPolygon geometry.\n * @return {string} Coordinates part of MultiPolygon as WKT.\n * @private\n */\n_ol_format_WKT_.encodeMultiPolygonGeometry_ = function(geom) {\n  var array = [];\n  var components = geom.getPolygons();\n  for (var i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + _ol_format_WKT_.encodePolygonGeometry_(\n        components[i]) + ')');\n  }\n  return array.join(',');\n};\n\n/**\n * @param {ol.geom.SimpleGeometry} geom SimpleGeometry geometry.\n * @return {string} Potential dimensional information for WKT type.\n * @private\n */\n_ol_format_WKT_.encodeGeometryLayout_ = function(geom) {\n  var layout = geom.getLayout();\n  var dimInfo = '';\n  if (layout === _ol_geom_GeometryLayout_.XYZ || layout === _ol_geom_GeometryLayout_.XYZM) {\n    dimInfo += _ol_format_WKT_.Z;\n  }\n  if (layout === _ol_geom_GeometryLayout_.XYM || layout === _ol_geom_GeometryLayout_.XYZM) {\n    dimInfo += _ol_format_WKT_.M;\n  }\n  return dimInfo;\n};\n\n\n/**\n * Encode a geometry as WKT.\n * @param {ol.geom.Geometry} geom The geometry to encode.\n * @return {string} WKT string for the geometry.\n * @private\n */\n_ol_format_WKT_.encode_ = function(geom) {\n  var type = geom.getType();\n  var geometryEncoder = _ol_format_WKT_.GeometryEncoder_[type];\n  var enc = geometryEncoder(geom);\n  type = type.toUpperCase();\n  if (geom instanceof _ol_geom_SimpleGeometry_) {\n    var dimInfo = _ol_format_WKT_.encodeGeometryLayout_(geom);\n    if (dimInfo.length > 0) {\n      type += ' ' + dimInfo;\n    }\n  }\n  if (enc.length === 0) {\n    return type + ' ' + _ol_format_WKT_.EMPTY;\n  }\n  return type + '(' + enc + ')';\n};\n\n\n/**\n * @const\n * @type {Object.<string, function(ol.geom.Geometry): string>}\n * @private\n */\n_ol_format_WKT_.GeometryEncoder_ = {\n  'Point': _ol_format_WKT_.encodePointGeometry_,\n  'LineString': _ol_format_WKT_.encodeLineStringGeometry_,\n  'Polygon': _ol_format_WKT_.encodePolygonGeometry_,\n  'MultiPoint': _ol_format_WKT_.encodeMultiPointGeometry_,\n  'MultiLineString': _ol_format_WKT_.encodeMultiLineStringGeometry_,\n  'MultiPolygon': _ol_format_WKT_.encodeMultiPolygonGeometry_,\n  'GeometryCollection': _ol_format_WKT_.encodeGeometryCollectionGeometry_\n};\n\n\n/**\n * Parse a WKT string.\n * @param {string} wkt WKT string.\n * @return {ol.geom.Geometry|undefined}\n *     The geometry created.\n * @private\n */\n_ol_format_WKT_.prototype.parse_ = function(wkt) {\n  var lexer = new _ol_format_WKT_.Lexer(wkt);\n  var parser = new _ol_format_WKT_.Parser(lexer);\n  return parser.parse();\n};\n\n\n/**\n * Read a feature from a WKT source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {ol.Feature} Feature.\n * @api\n */\n_ol_format_WKT_.prototype.readFeature;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_WKT_.prototype.readFeatureFromText = function(text, opt_options) {\n  var geom = this.readGeometryFromText(text, opt_options);\n  if (geom) {\n    var feature = new _ol_Feature_();\n    feature.setGeometry(geom);\n    return feature;\n  }\n  return null;\n};\n\n\n/**\n * Read all features from a WKT source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {Array.<ol.Feature>} Features.\n * @api\n */\n_ol_format_WKT_.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_WKT_.prototype.readFeaturesFromText = function(text, opt_options) {\n  var geometries = [];\n  var geometry = this.readGeometryFromText(text, opt_options);\n  if (this.splitCollection_ &&\n      geometry.getType() == _ol_geom_GeometryType_.GEOMETRY_COLLECTION) {\n    geometries = (/** @type {ol.geom.GeometryCollection} */ (geometry))\n        .getGeometriesArray();\n  } else {\n    geometries = [geometry];\n  }\n  var feature, features = [];\n  for (var i = 0, ii = geometries.length; i < ii; ++i) {\n    feature = new _ol_Feature_();\n    feature.setGeometry(geometries[i]);\n    features.push(feature);\n  }\n  return features;\n};\n\n\n/**\n * Read a single geometry from a WKT source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {ol.geom.Geometry} Geometry.\n * @api\n */\n_ol_format_WKT_.prototype.readGeometry;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_WKT_.prototype.readGeometryFromText = function(text, opt_options) {\n  var geometry = this.parse_(text);\n  if (geometry) {\n    return (\n      /** @type {ol.geom.Geometry} */ _ol_format_Feature_.transformWithOptions(geometry, false, opt_options)\n    );\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Encode a feature as a WKT string.\n *\n * @function\n * @param {ol.Feature} feature Feature.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} WKT string.\n * @api\n */\n_ol_format_WKT_.prototype.writeFeature;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_WKT_.prototype.writeFeatureText = function(feature, opt_options) {\n  var geometry = feature.getGeometry();\n  if (geometry) {\n    return this.writeGeometryText(geometry, opt_options);\n  }\n  return '';\n};\n\n\n/**\n * Encode an array of features as a WKT string.\n *\n * @function\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} WKT string.\n * @api\n */\n_ol_format_WKT_.prototype.writeFeatures;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_WKT_.prototype.writeFeaturesText = function(features, opt_options) {\n  if (features.length == 1) {\n    return this.writeFeatureText(features[0], opt_options);\n  }\n  var geometries = [];\n  for (var i = 0, ii = features.length; i < ii; ++i) {\n    geometries.push(features[i].getGeometry());\n  }\n  var collection = new _ol_geom_GeometryCollection_(geometries);\n  return this.writeGeometryText(collection, opt_options);\n};\n\n\n/**\n * Write a single geometry as a WKT string.\n *\n * @function\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} WKT string.\n * @api\n */\n_ol_format_WKT_.prototype.writeGeometry;\n\n\n/**\n * @inheritDoc\n */\n_ol_format_WKT_.prototype.writeGeometryText = function(geometry, opt_options) {\n  return _ol_format_WKT_.encode_(/** @type {ol.geom.Geometry} */ (\n    _ol_format_Feature_.transformWithOptions(geometry, true, opt_options)));\n};\n\n\n/**\n * @const\n * @enum {number}\n * @private\n */\n_ol_format_WKT_.TokenType_ = {\n  TEXT: 1,\n  LEFT_PAREN: 2,\n  RIGHT_PAREN: 3,\n  NUMBER: 4,\n  COMMA: 5,\n  EOF: 6\n};\n\n\n/**\n * Class to tokenize a WKT string.\n * @param {string} wkt WKT string.\n * @constructor\n * @protected\n */\n_ol_format_WKT_.Lexer = function(wkt) {\n\n  /**\n   * @type {string}\n   */\n  this.wkt = wkt;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.index_ = -1;\n};\n\n\n/**\n * @param {string} c Character.\n * @return {boolean} Whether the character is alphabetic.\n * @private\n */\n_ol_format_WKT_.Lexer.prototype.isAlpha_ = function(c) {\n  return c >= 'a' && c <= 'z' || c >= 'A' && c <= 'Z';\n};\n\n\n/**\n * @param {string} c Character.\n * @param {boolean=} opt_decimal Whether the string number\n *     contains a dot, i.e. is a decimal number.\n * @return {boolean} Whether the character is numeric.\n * @private\n */\n_ol_format_WKT_.Lexer.prototype.isNumeric_ = function(c, opt_decimal) {\n  var decimal = opt_decimal !== undefined ? opt_decimal : false;\n  return c >= '0' && c <= '9' || c == '.' && !decimal;\n};\n\n\n/**\n * @param {string} c Character.\n * @return {boolean} Whether the character is whitespace.\n * @private\n */\n_ol_format_WKT_.Lexer.prototype.isWhiteSpace_ = function(c) {\n  return c == ' ' || c == '\\t' || c == '\\r' || c == '\\n';\n};\n\n\n/**\n * @return {string} Next string character.\n * @private\n */\n_ol_format_WKT_.Lexer.prototype.nextChar_ = function() {\n  return this.wkt.charAt(++this.index_);\n};\n\n\n/**\n * Fetch and return the next token.\n * @return {!ol.WKTToken} Next string token.\n */\n_ol_format_WKT_.Lexer.prototype.nextToken = function() {\n  var c = this.nextChar_();\n  var token = {position: this.index_, value: c};\n\n  if (c == '(') {\n    token.type = _ol_format_WKT_.TokenType_.LEFT_PAREN;\n  } else if (c == ',') {\n    token.type = _ol_format_WKT_.TokenType_.COMMA;\n  } else if (c == ')') {\n    token.type = _ol_format_WKT_.TokenType_.RIGHT_PAREN;\n  } else if (this.isNumeric_(c) || c == '-') {\n    token.type = _ol_format_WKT_.TokenType_.NUMBER;\n    token.value = this.readNumber_();\n  } else if (this.isAlpha_(c)) {\n    token.type = _ol_format_WKT_.TokenType_.TEXT;\n    token.value = this.readText_();\n  } else if (this.isWhiteSpace_(c)) {\n    return this.nextToken();\n  } else if (c === '') {\n    token.type = _ol_format_WKT_.TokenType_.EOF;\n  } else {\n    throw new Error('Unexpected character: ' + c);\n  }\n\n  return token;\n};\n\n\n/**\n * @return {number} Numeric token value.\n * @private\n */\n_ol_format_WKT_.Lexer.prototype.readNumber_ = function() {\n  var c, index = this.index_;\n  var decimal = false;\n  var scientificNotation = false;\n  do {\n    if (c == '.') {\n      decimal = true;\n    } else if (c == 'e' || c == 'E') {\n      scientificNotation = true;\n    }\n    c = this.nextChar_();\n  } while (\n    this.isNumeric_(c, decimal) ||\n      // if we haven't detected a scientific number before, 'e' or 'E'\n      // hint that we should continue to read\n      !scientificNotation && (c == 'e' || c == 'E') ||\n      // once we know that we have a scientific number, both '-' and '+'\n      // are allowed\n      scientificNotation && (c == '-' || c == '+')\n  );\n  return parseFloat(this.wkt.substring(index, this.index_--));\n};\n\n\n/**\n * @return {string} String token value.\n * @private\n */\n_ol_format_WKT_.Lexer.prototype.readText_ = function() {\n  var c, index = this.index_;\n  do {\n    c = this.nextChar_();\n  } while (this.isAlpha_(c));\n  return this.wkt.substring(index, this.index_--).toUpperCase();\n};\n\n\n/**\n * Class to parse the tokens from the WKT string.\n * @param {ol.format.WKT.Lexer} lexer The lexer.\n * @constructor\n * @protected\n */\n_ol_format_WKT_.Parser = function(lexer) {\n\n  /**\n   * @type {ol.format.WKT.Lexer}\n   * @private\n   */\n  this.lexer_ = lexer;\n\n  /**\n   * @type {ol.WKTToken}\n   * @private\n   */\n  this.token_;\n\n  /**\n   * @type {ol.geom.GeometryLayout}\n   * @private\n   */\n  this.layout_ = _ol_geom_GeometryLayout_.XY;\n};\n\n\n/**\n * Fetch the next token form the lexer and replace the active token.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.consume_ = function() {\n  this.token_ = this.lexer_.nextToken();\n};\n\n/**\n * Tests if the given type matches the type of the current token.\n * @param {ol.format.WKT.TokenType_} type Token type.\n * @return {boolean} Whether the token matches the given type.\n */\n_ol_format_WKT_.Parser.prototype.isTokenType = function(type) {\n  var isMatch = this.token_.type == type;\n  return isMatch;\n};\n\n\n/**\n * If the given type matches the current token, consume it.\n * @param {ol.format.WKT.TokenType_} type Token type.\n * @return {boolean} Whether the token matches the given type.\n */\n_ol_format_WKT_.Parser.prototype.match = function(type) {\n  var isMatch = this.isTokenType(type);\n  if (isMatch) {\n    this.consume_();\n  }\n  return isMatch;\n};\n\n\n/**\n * Try to parse the tokens provided by the lexer.\n * @return {ol.geom.Geometry} The geometry.\n */\n_ol_format_WKT_.Parser.prototype.parse = function() {\n  this.consume_();\n  var geometry = this.parseGeometry_();\n  return geometry;\n};\n\n\n/**\n * Try to parse the dimensional info.\n * @return {ol.geom.GeometryLayout} The layout.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parseGeometryLayout_ = function() {\n  var layout = _ol_geom_GeometryLayout_.XY;\n  var dimToken = this.token_;\n  if (this.isTokenType(_ol_format_WKT_.TokenType_.TEXT)) {\n    var dimInfo = dimToken.value;\n    if (dimInfo === _ol_format_WKT_.Z) {\n      layout = _ol_geom_GeometryLayout_.XYZ;\n    } else if (dimInfo === _ol_format_WKT_.M) {\n      layout = _ol_geom_GeometryLayout_.XYM;\n    } else if (dimInfo === _ol_format_WKT_.ZM) {\n      layout = _ol_geom_GeometryLayout_.XYZM;\n    }\n    if (layout !== _ol_geom_GeometryLayout_.XY) {\n      this.consume_();\n    }\n  }\n  return layout;\n};\n\n\n/**\n * @return {!ol.geom.Geometry} The geometry.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parseGeometry_ = function() {\n  var token = this.token_;\n  if (this.match(_ol_format_WKT_.TokenType_.TEXT)) {\n    var geomType = token.value;\n    this.layout_ = this.parseGeometryLayout_();\n    if (geomType == _ol_geom_GeometryType_.GEOMETRY_COLLECTION.toUpperCase()) {\n      var geometries = this.parseGeometryCollectionText_();\n      return new _ol_geom_GeometryCollection_(geometries);\n    } else {\n      var parser = _ol_format_WKT_.Parser.GeometryParser_[geomType];\n      var ctor = _ol_format_WKT_.Parser.GeometryConstructor_[geomType];\n      if (!parser || !ctor) {\n        throw new Error('Invalid geometry type: ' + geomType);\n      }\n      var coordinates = parser.call(this);\n      return new ctor(coordinates, this.layout_);\n    }\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<ol.geom.Geometry>} A collection of geometries.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parseGeometryCollectionText_ = function() {\n  if (this.match(_ol_format_WKT_.TokenType_.LEFT_PAREN)) {\n    var geometries = [];\n    do {\n      geometries.push(this.parseGeometry_());\n    } while (this.match(_ol_format_WKT_.TokenType_.COMMA));\n    if (this.match(_ol_format_WKT_.TokenType_.RIGHT_PAREN)) {\n      return geometries;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {Array.<number>} All values in a point.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parsePointText_ = function() {\n  if (this.match(_ol_format_WKT_.TokenType_.LEFT_PAREN)) {\n    var coordinates = this.parsePoint_();\n    if (this.match(_ol_format_WKT_.TokenType_.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return null;\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All points in a linestring.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parseLineStringText_ = function() {\n  if (this.match(_ol_format_WKT_.TokenType_.LEFT_PAREN)) {\n    var coordinates = this.parsePointList_();\n    if (this.match(_ol_format_WKT_.TokenType_.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All points in a polygon.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parsePolygonText_ = function() {\n  if (this.match(_ol_format_WKT_.TokenType_.LEFT_PAREN)) {\n    var coordinates = this.parseLineStringTextList_();\n    if (this.match(_ol_format_WKT_.TokenType_.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All points in a multipoint.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parseMultiPointText_ = function() {\n  if (this.match(_ol_format_WKT_.TokenType_.LEFT_PAREN)) {\n    var coordinates;\n    if (this.token_.type == _ol_format_WKT_.TokenType_.LEFT_PAREN) {\n      coordinates = this.parsePointTextList_();\n    } else {\n      coordinates = this.parsePointList_();\n    }\n    if (this.match(_ol_format_WKT_.TokenType_.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All linestring points\n *                                        in a multilinestring.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parseMultiLineStringText_ = function() {\n  if (this.match(_ol_format_WKT_.TokenType_.LEFT_PAREN)) {\n    var coordinates = this.parseLineStringTextList_();\n    if (this.match(_ol_format_WKT_.TokenType_.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All polygon points in a multipolygon.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parseMultiPolygonText_ = function() {\n  if (this.match(_ol_format_WKT_.TokenType_.LEFT_PAREN)) {\n    var coordinates = this.parsePolygonTextList_();\n    if (this.match(_ol_format_WKT_.TokenType_.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<number>} A point.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parsePoint_ = function() {\n  var coordinates = [];\n  var dimensions = this.layout_.length;\n  for (var i = 0; i < dimensions; ++i) {\n    var token = this.token_;\n    if (this.match(_ol_format_WKT_.TokenType_.NUMBER)) {\n      coordinates.push(token.value);\n    } else {\n      break;\n    }\n  }\n  if (coordinates.length == dimensions) {\n    return coordinates;\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} An array of points.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parsePointList_ = function() {\n  var coordinates = [this.parsePoint_()];\n  while (this.match(_ol_format_WKT_.TokenType_.COMMA)) {\n    coordinates.push(this.parsePoint_());\n  }\n  return coordinates;\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} An array of points.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parsePointTextList_ = function() {\n  var coordinates = [this.parsePointText_()];\n  while (this.match(_ol_format_WKT_.TokenType_.COMMA)) {\n    coordinates.push(this.parsePointText_());\n  }\n  return coordinates;\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} An array of points.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parseLineStringTextList_ = function() {\n  var coordinates = [this.parseLineStringText_()];\n  while (this.match(_ol_format_WKT_.TokenType_.COMMA)) {\n    coordinates.push(this.parseLineStringText_());\n  }\n  return coordinates;\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} An array of points.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.parsePolygonTextList_ = function() {\n  var coordinates = [this.parsePolygonText_()];\n  while (this.match(_ol_format_WKT_.TokenType_.COMMA)) {\n    coordinates.push(this.parsePolygonText_());\n  }\n  return coordinates;\n};\n\n\n/**\n * @return {boolean} Whether the token implies an empty geometry.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.isEmptyGeometry_ = function() {\n  var isEmpty = this.isTokenType(_ol_format_WKT_.TokenType_.TEXT) &&\n      this.token_.value == _ol_format_WKT_.EMPTY;\n  if (isEmpty) {\n    this.consume_();\n  }\n  return isEmpty;\n};\n\n\n/**\n * Create an error message for an unexpected token error.\n * @return {string} Error message.\n * @private\n */\n_ol_format_WKT_.Parser.prototype.formatErrorMessage_ = function() {\n  return 'Unexpected `' + this.token_.value + '` at position ' +\n      this.token_.position + ' in `' + this.lexer_.wkt + '`';\n};\n\n\n/**\n * @enum {function (new:ol.geom.Geometry, Array, ol.geom.GeometryLayout)}\n * @private\n */\n_ol_format_WKT_.Parser.GeometryConstructor_ = {\n  'POINT': _ol_geom_Point_,\n  'LINESTRING': _ol_geom_LineString_,\n  'POLYGON': _ol_geom_Polygon_,\n  'MULTIPOINT': _ol_geom_MultiPoint_,\n  'MULTILINESTRING': _ol_geom_MultiLineString_,\n  'MULTIPOLYGON': _ol_geom_MultiPolygon_\n};\n\n\n/**\n * @enum {(function(): Array)}\n * @private\n */\n_ol_format_WKT_.Parser.GeometryParser_ = {\n  'POINT': _ol_format_WKT_.Parser.prototype.parsePointText_,\n  'LINESTRING': _ol_format_WKT_.Parser.prototype.parseLineStringText_,\n  'POLYGON': _ol_format_WKT_.Parser.prototype.parsePolygonText_,\n  'MULTIPOINT': _ol_format_WKT_.Parser.prototype.parseMultiPointText_,\n  'MULTILINESTRING': _ol_format_WKT_.Parser.prototype.parseMultiLineStringText_,\n  'MULTIPOLYGON': _ol_format_WKT_.Parser.prototype.parseMultiPolygonText_\n};\nexport default _ol_format_WKT_;\n","import _ol_style_Fill_ from '../style/fill.js';\nimport _ol_style_TextPlacement_ from '../style/textplacement.js';\n\n/**\n * @classdesc\n * Set text style for vector features.\n *\n * @constructor\n * @param {olx.style.TextOptions=} opt_options Options.\n * @api\n */\nvar _ol_style_Text_ = function(opt_options) {\n\n  var options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.font_ = options.font;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.text_ = options.text;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textAlign_ = options.textAlign;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textBaseline_ = options.textBaseline;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill :\n    new _ol_style_Fill_({color: _ol_style_Text_.DEFAULT_FILL_COLOR_});\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n  /**\n   * @private\n   * @type {ol.style.TextPlacement|string}\n   */\n  this.placement_ = options.placement !== undefined ? options.placement : _ol_style_TextPlacement_.POINT;\n\n  //TODO Use options.overflow directly after removing @deprecated exceedLength\n  var overflow = options.overflow === undefined ? options.exceedLength : options.overflow;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overflow_ = overflow !== undefined ? overflow : false;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.padding_ = options.padding === undefined ? null : options.padding;\n};\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n * @private\n */\n_ol_style_Text_.DEFAULT_FILL_COLOR_ = '#333';\n\n\n/**\n * Clones the style.\n * @return {ol.style.Text} The cloned style.\n * @api\n */\n_ol_style_Text_.prototype.clone = function() {\n  return new _ol_style_Text_({\n    font: this.getFont(),\n    placement: this.getPlacement(),\n    maxAngle: this.getMaxAngle(),\n    overflow: this.getOverflow(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    scale: this.getScale(),\n    text: this.getText(),\n    textAlign: this.getTextAlign(),\n    textBaseline: this.getTextBaseline(),\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    offsetX: this.getOffsetX(),\n    offsetY: this.getOffsetY()\n  });\n};\n\n\n/**\n * Get the `overflow` configuration.\n * @return {boolean} Let text overflow the length of the path they follow.\n * @api\n */\n_ol_style_Text_.prototype.getOverflow = function() {\n  return this.overflow_;\n};\n\n\n/**\n * Get the font name.\n * @return {string|undefined} Font.\n * @api\n */\n_ol_style_Text_.prototype.getFont = function() {\n  return this.font_;\n};\n\n\n/**\n * Get the maximum angle between adjacent characters.\n * @return {number} Angle in radians.\n * @api\n */\n_ol_style_Text_.prototype.getMaxAngle = function() {\n  return this.maxAngle_;\n};\n\n\n/**\n * Get the label placement.\n * @return {ol.style.TextPlacement|string} Text placement.\n * @api\n */\n_ol_style_Text_.prototype.getPlacement = function() {\n  return this.placement_;\n};\n\n\n/**\n * Get the x-offset for the text.\n * @return {number} Horizontal text offset.\n * @api\n */\n_ol_style_Text_.prototype.getOffsetX = function() {\n  return this.offsetX_;\n};\n\n\n/**\n * Get the y-offset for the text.\n * @return {number} Vertical text offset.\n * @api\n */\n_ol_style_Text_.prototype.getOffsetY = function() {\n  return this.offsetY_;\n};\n\n\n/**\n * Get the fill style for the text.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\n_ol_style_Text_.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Determine whether the text rotates with the map.\n * @return {boolean|undefined} Rotate with map.\n * @api\n */\n_ol_style_Text_.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the text rotation.\n * @return {number|undefined} Rotation.\n * @api\n */\n_ol_style_Text_.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the text scale.\n * @return {number|undefined} Scale.\n * @api\n */\n_ol_style_Text_.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Get the stroke style for the text.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\n_ol_style_Text_.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Get the text to be rendered.\n * @return {string|undefined} Text.\n * @api\n */\n_ol_style_Text_.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Get the text alignment.\n * @return {string|undefined} Text align.\n * @api\n */\n_ol_style_Text_.prototype.getTextAlign = function() {\n  return this.textAlign_;\n};\n\n\n/**\n * Get the text baseline.\n * @return {string|undefined} Text baseline.\n * @api\n */\n_ol_style_Text_.prototype.getTextBaseline = function() {\n  return this.textBaseline_;\n};\n\n\n/**\n * Get the background fill style for the text.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\n_ol_style_Text_.prototype.getBackgroundFill = function() {\n  return this.backgroundFill_;\n};\n\n\n/**\n * Get the background stroke style for the text.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\n_ol_style_Text_.prototype.getBackgroundStroke = function() {\n  return this.backgroundStroke_;\n};\n\n\n/**\n * Get the padding for the text.\n * @return {Array.<number>} Padding.\n * @api\n */\n_ol_style_Text_.prototype.getPadding = function() {\n  return this.padding_;\n};\n\n\n/**\n * Set the `overflow` property.\n *\n * @param {boolean} overflow Let text overflow the path that it follows.\n * @api\n */\n_ol_style_Text_.prototype.setOverflow = function(overflow) {\n  this.overflow_ = overflow;\n};\n\n\n/**\n * Set the font.\n *\n * @param {string|undefined} font Font.\n * @api\n */\n_ol_style_Text_.prototype.setFont = function(font) {\n  this.font_ = font;\n};\n\n\n/**\n * Set the maximum angle between adjacent characters.\n *\n * @param {number} maxAngle Angle in radians.\n * @api\n */\n_ol_style_Text_.prototype.setMaxAngle = function(maxAngle) {\n  this.maxAngle_ = maxAngle;\n};\n\n\n/**\n * Set the x offset.\n *\n * @param {number} offsetX Horizontal text offset.\n * @api\n */\n_ol_style_Text_.prototype.setOffsetX = function(offsetX) {\n  this.offsetX_ = offsetX;\n};\n\n\n/**\n * Set the y offset.\n *\n * @param {number} offsetY Vertical text offset.\n * @api\n */\n_ol_style_Text_.prototype.setOffsetY = function(offsetY) {\n  this.offsetY_ = offsetY;\n};\n\n\n/**\n * Set the text placement.\n *\n * @param {ol.style.TextPlacement|string} placement Placement.\n * @api\n */\n_ol_style_Text_.prototype.setPlacement = function(placement) {\n  this.placement_ = placement;\n};\n\n\n/**\n * Set the fill.\n *\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\n_ol_style_Text_.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number|undefined} rotation Rotation.\n * @api\n */\n_ol_style_Text_.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number|undefined} scale Scale.\n * @api\n */\n_ol_style_Text_.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set the stroke.\n *\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\n_ol_style_Text_.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Set the text.\n *\n * @param {string|undefined} text Text.\n * @api\n */\n_ol_style_Text_.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Set the text alignment.\n *\n * @param {string|undefined} textAlign Text align.\n * @api\n */\n_ol_style_Text_.prototype.setTextAlign = function(textAlign) {\n  this.textAlign_ = textAlign;\n};\n\n\n/**\n * Set the text baseline.\n *\n * @param {string|undefined} textBaseline Text baseline.\n * @api\n */\n_ol_style_Text_.prototype.setTextBaseline = function(textBaseline) {\n  this.textBaseline_ = textBaseline;\n};\n\n\n/**\n * Set the background fill.\n *\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\n_ol_style_Text_.prototype.setBackgroundFill = function(fill) {\n  this.backgroundFill_ = fill;\n};\n\n\n/**\n * Set the background stroke.\n *\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\n_ol_style_Text_.prototype.setBackgroundStroke = function(stroke) {\n  this.backgroundStroke_ = stroke;\n};\n\n\n/**\n * Set the padding (`[top, right, bottom, left]`).\n *\n * @param {!Array.<number>} padding Padding.\n * @api\n */\n_ol_style_Text_.prototype.setPadding = function(padding) {\n  this.padding_ = padding;\n};\nexport default _ol_style_Text_;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerEdit.vue?vue&type=style&index=0&id=173125b2&prod&lang=less&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"OpenLayers\")]),_c('el-breadcrumb-item',[_vm._v(\"在线编辑\")])],1),_c('el-card',[_c('div',{attrs:{\"id\":\"map\"}}),_c('ul',{staticClass:\"tool-box\",attrs:{\"id\":\"tools\"}},[_c('li',{staticClass:\"draw-btn\",attrs:{\"type\":\"Point\"},on:{\"click\":function($event){return _vm.liClick($event)}}},[_vm._v(\"点\")]),_c('li',{staticClass:\"draw-btn\",attrs:{\"type\":\"LineString\"},on:{\"click\":function($event){return _vm.liClick($event)}}},[_vm._v(\"线\")]),_c('li',{staticClass:\"draw-btn\",attrs:{\"type\":\"Polygon\"},on:{\"click\":function($event){return _vm.liClick($event)}}},[_vm._v(\"面\")]),_c('li',{staticClass:\"draw-btn\",attrs:{\"type\":\"Edit\"},on:{\"click\":function($event){return _vm.liClick($event)}}},[_vm._v(\"编辑\")])]),_c('div',{staticClass:\"edit-info\"},[_c('input',{attrs:{\"id\":\"name\",\"type\":\"text\",\"placeholder\":\"名称\"}}),_c('input',{attrs:{\"id\":\"submit\",\"type\":\"button\",\"value\":\"提交\"},on:{\"click\":_vm.submitClick}}),_c('div',{staticClass:\"edit-tools\"},[_c('input',{attrs:{\"id\":\"editName\",\"type\":\"text\",\"placeholder\":\"编辑\"}}),_c('input',{attrs:{\"id\":\"editSave\",\"type\":\"button\",\"value\":\"保存\"},on:{\"click\":_vm.editSave}}),_c('input',{attrs:{\"id\":\"editClose\",\"type\":\"button\",\"value\":\"关闭\"},on:{\"click\":_vm.editClose}})])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!--面包屑导航区域-->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>OpenLayers</el-breadcrumb-item>\r\n      <el-breadcrumb-item>在线编辑</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!--卡片区域-->\r\n    <el-card>\r\n      <div id=\"map\"></div>\r\n      <ul class=\"tool-box\" id=\"tools\">\r\n        <li type=\"Point\" class=\"draw-btn\" @click=\"liClick($event)\">点</li>\r\n        <li type=\"LineString\" class=\"draw-btn\" @click=\"liClick($event)\">线</li>\r\n        <li type=\"Polygon\" class=\"draw-btn\" @click=\"liClick($event)\">面</li>\r\n        <li type=\"Edit\" class=\"draw-btn\" @click=\"liClick($event)\">编辑</li>\r\n      </ul>\r\n      <div class=\"edit-info\">\r\n        <input id=\"name\" type=\"text\" placeholder=\"名称\">\r\n        <input id=\"submit\" type=\"button\" value=\"提交\" @click=\"submitClick\">\r\n        <div class=\"edit-tools\">\r\n          <input id=\"editName\" type=\"text\" placeholder=\"编辑\">\r\n          <input id=\"editSave\" type=\"button\" value=\"保存\" @click=\"editSave\">\r\n          <input id=\"editClose\" type=\"button\" value=\"关闭\" @click=\"editClose\">\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Map from 'ol/map';\r\nimport View from 'ol/view';\r\nimport VectorLayer from 'ol/layer/vector';\r\nimport Vector from 'ol/source/vector';\r\nimport WKT from 'ol/format/wkt';\r\nimport Draw from 'ol/interaction/draw';\r\nimport Select from 'ol/interaction/select';\r\nimport Modify from 'ol/interaction/modify';\r\nimport Style from 'ol/style/style';\r\nimport Circle from 'ol/style/circle';\r\nimport Stroke from 'ol/style/stroke';\r\nimport Text from 'ol/style/text';\r\nimport Fill from 'ol/style/fill';\r\nimport proj from 'ol/proj';\r\nimport control from 'ol/control';\r\nimport {getTdtLayer} from \"../../utils/searchUtils\";\r\nimport {addLayerEdit, getLayerEdit} from \"@/api\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      map: null,\r\n      source: null,\r\n      element: null,\r\n      editInfoDoc: null,\r\n      draw: null,\r\n      select: null,\r\n      edit: null,\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  mounted() {\r\n    this.initMap()\r\n  },\r\n  methods: {\r\n    initMap() {\r\n      this.toolsDoc = document.getElementById(\"tools\")\r\n      this.toolsDoc.classList.add('edit-tools')\r\n      this.editInfoDoc = document.getElementsByClassName(\"edit-info\")[0]\r\n      this.editNameDoc = document.getElementById(\"editName\")\r\n      const that = this\r\n      let map;\r\n      let source = new Vector({\r\n        features: []\r\n      });\r\n\r\n      let vector = new VectorLayer({\r\n        source: source,\r\n        style: function (feature) {\r\n          return that.styleFunction(feature, false);\r\n        }\r\n      });\r\n\r\n      map = new Map({\r\n        controls: control.defaults({\r\n          attribution: false\r\n        }),\r\n        target: 'map',\r\n        layers: [\r\n          getTdtLayer(\"vec_w\"),\r\n          getTdtLayer(\"cva_w\"),\r\n          vector\r\n        ],\r\n        view: new View({\r\n          center: proj.fromLonLat([98.633, 31.607]),\r\n          zoom: 4,\r\n          minZoom: 0,\r\n          maxZoom: 18\r\n        })\r\n      });\r\n      that.addFeatures();\r\n\r\n      let select, edit;\r\n      select = new Select({\r\n        layers: [vector],\r\n        style: function (feature) {\r\n          return that.styleFunction(feature, true);\r\n        }\r\n      });\r\n      edit = new Modify({\r\n        features: select.getFeatures()\r\n      });\r\n\r\n      select.on(\"select\", function (e) {\r\n        let features = e.selected;\r\n        if (features.length > 0) {\r\n          that.startEdit();\r\n        } else {\r\n          that.deSelectEvt();\r\n        }\r\n      });\r\n\r\n      map.addInteraction(select);\r\n      map.addInteraction(edit);\r\n      select.setActive(false);\r\n      edit.setActive(false);\r\n\r\n      map.on('click', function (evt) {\r\n        if (!map.hasFeatureAtPixel(evt.pixel)) {\r\n          edit.setActive(false);\r\n        } else {\r\n          edit.setActive(true);\r\n        }\r\n      });\r\n      map.on('pointermove', function (evt) {\r\n        if (map.hasFeatureAtPixel(evt.pixel)) {\r\n          map.getTargetElement().style.cursor = \"pointer\"\r\n        } else {\r\n          map.getTargetElement().style.cursor = \"default\"\r\n        }\r\n      });\r\n      this.map = map\r\n      this.source = source\r\n      this.select = select\r\n      this.edit = edit\r\n    },\r\n    liClick(event) {\r\n      let docm = event.target\r\n      console.log(docm.classList.contains('active'));\r\n      let _type = docm.type;\r\n      let isActive = docm.classList.contains('active')\r\n      if (_type === \"Edit\") {\r\n        if (isActive) {\r\n          docm.classList.remove('active')\r\n          this.select.setActive(false);\r\n          this.edit.setActive(false);\r\n          this.editInfoDoc.style.display = \"none\";\r\n        } else {\r\n          docm.classList.add('active')\r\n          this.select.setActive(true);\r\n          this.edit.setActive(true);\r\n        }\r\n      } else {\r\n        if (this.edit.getActive()) {\r\n          if (confirm(\"正在编辑中，是否保存当前编辑？\")) {\r\n            let editName = this.editNameDoc.value\r\n            if (editName === \"\") {\r\n              docm.classList.add('active')\r\n              console.log(editName);\r\n              alert(\"保存信息不完整，请检查后再保存！\");\r\n            } else {\r\n              this.saveEdit();\r\n              docm.classList.add('active')\r\n              this.addDrawTool(_type);\r\n            }\r\n          }\r\n        } else {\r\n          docm.classList.add('active')\r\n          this.addDrawTool(_type);\r\n        }\r\n        // $(\".draw-btn\").removeClass(\"active\");\r\n        // $(this).addClass(\"active\");\r\n        // addDrawTool(_type);\r\n      }\r\n    },\r\n    submitClick() {\r\n      let name = document.getElementById(\"name\").value;\r\n      let selectFeatures = this.select.getFeatures();\r\n      let selectFeature = selectFeatures.item(0);\r\n      let WKTGeo = new WKT().writeGeometry(selectFeature.getGeometry());//坐标系转换为4326\r\n      let paras = {\r\n        name: name,\r\n        geom: WKTGeo + ''\r\n      };\r\n      this.$API.addLayerEdit(paras)\r\n      this.select.getFeatures().clear();\r\n      this.select.setActive(false);\r\n      this.edit.setActive(false);\r\n      this.addFeatures();\r\n    },\r\n    editClose() {\r\n      this.deSelectEvt();\r\n    },\r\n    editSave() {\r\n      let selectFeatures = this.select.getFeatures();\r\n      let editName = this.editNameDoc.value\r\n      if (editName === \"\" || selectFeatures.getLength() === 0) {\r\n        console.log(editName, selectFeatures.getLength());\r\n        alert(\"保存信息不完整，请检查后再保存！\");\r\n      } else {\r\n        if (confirm(\"确定保存该条记录吗？\")) {\r\n          this.saveEdit();\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n    },\r\n    addDrawTool(type) {\r\n      let that = this\r\n      if (this.draw) this.map.removeInteraction(this.draw);\r\n      this.draw = new Draw({\r\n        source: this.source,\r\n        type: type,\r\n        stopClick: true,\r\n        freehand: false//自由手绘\r\n      });\r\n      this.map.addInteraction(this.draw);\r\n      //绘制结束\r\n      this.draw.on(\"drawend\", function (evt) {\r\n        that.draw.setActive(false);\r\n        that.select.setActive(true);\r\n        let feature = evt.feature;\r\n        feature.attr = {\r\n          id: \"\",\r\n          name: \"\",\r\n        };\r\n        that.select.getFeatures().insertAt(0, feature);\r\n        that.startEdit();\r\n      });\r\n    },\r\n    saveEdit() {\r\n      let selectFeatures = this.select.getFeatures();\r\n      let selectFeature = selectFeatures.item(0);\r\n      selectFeature.attr.name = this.editNameDoc.value;\r\n      let wkt = new WKT().writeFeature(selectFeature);\r\n      console.log(wkt);\r\n\r\n      this.editInfoDoc.style.display = \"none\";\r\n      this.edit.setActive(false);\r\n      this.select.setActive(false);\r\n      this.select.getFeatures().clear();\r\n      this.toolsDoc.children().removeClass(\"active\");\r\n\r\n      this.editNameDoc.value = \"\";\r\n    },\r\n    startEdit() {\r\n      let feture = this.select.getFeatures().item(0);\r\n      let attr = feture.attr;\r\n      this.editNameDoc.value = attr.name\r\n      this.editInfoDoc.style.display = \"block\";\r\n      this.edit.setActive(true);\r\n    },\r\n    deSelectEvt() {\r\n      if (this.edit.getActive()) {\r\n        if (confirm(\"正在编辑，是否保存？\")) {\r\n          this.saveEdit();\r\n        }\r\n      } else {\r\n        this.edit.setActive(false);\r\n        this.editInfoDoc.style.display = \"none\";\r\n      }\r\n    },\r\n    async addFeatures() {\r\n      if (this.source)\r\n        this.source.clear();\r\n      const { data: result } = await this.$API.getLayerEdit({ name: null })\r\n      let length = 0;\r\n      let features = [];\r\n      if (result.data)\r\n        length = result.data.length\r\n      for (let i = 0; i < length; i++) {\r\n        let _r = result.data[i];\r\n        let feature = new WKT().readFeature(_r.geom);\r\n        //transform(\"EPSG:4326\", \"EPSG:3857\");\r\n        feature.attr = {\r\n          id: _r.id,\r\n          name: _r.name\r\n        };\r\n        features.push(feature);\r\n      }\r\n      this.source.addFeatures(features);\r\n      this.source.changed()\r\n    },\r\n    styleFunction(feature, isSelect) {\r\n      let stroke = new Stroke({\r\n        color: 'black',\r\n        width: 2\r\n      });\r\n      let fill = new Fill({\r\n        color: 'red'\r\n      });\r\n      let _name = \"\",\r\n        _color = \"#ccc\";\r\n      if (isSelect) {\r\n        _name = feature.get(\"name\");\r\n        _color = \"#f00\";\r\n      }\r\n      return new Style({\r\n        stroke: stroke,\r\n        fill: fill,\r\n        image: new Circle({\r\n          radius: 8,\r\n          fill: new Fill({\r\n            color: _color\r\n          })\r\n        }),\r\n        text: new Text({\r\n          text: _name,\r\n          textAlign: \"left\",\r\n          offsetX: 12,\r\n          font: \"bold 13px sans-serif\",\r\n          fill: new Fill({\r\n            color: 'red'\r\n          }),\r\n          stroke: new Stroke({\r\n            color: 'white',\r\n            width: 2\r\n          })\r\n        })\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.tool-box {\r\n  font-size: 12px;\r\n  position: absolute;\r\n  top: 140px;\r\n  right: 50px;\r\n  background-color: white;\r\n  border-radius: 4px;\r\n  box-shadow: 1px 1px 2px #ccc;\r\n  padding: 0;\r\n  margin: 0;\r\n  list-style: none;\r\n  z-index: 9;\r\n}\r\n\r\n.tool-box li {\r\n  float: left;\r\n  height: 25px;\r\n  line-height: 25px;\r\n  width: 40px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.tool-box li:first-child {\r\n  border-top-left-radius: 4px;\r\n  border-bottom-left-radius: 4px;\r\n}\r\n\r\n.tool-box li:last-child {\r\n  border-top-right-radius: 4px;\r\n  border-bottom-right-radius: 4px;\r\n}\r\n\r\n.tool-box li:not(:first-child) {\r\n  border-left: 1px solid #ccc;\r\n}\r\n\r\n.tool-box li.active {\r\n  background-color: #5367ec;\r\n  color: white;\r\n}\r\n\r\n.edit-info {\r\n  position: absolute;\r\n  top: 50px;\r\n  right: 12px;\r\n  background-color: white;\r\n  border-radius: 4px;\r\n  box-shadow: 1px 1px 2px #ccc;\r\n  padding: 10px;\r\n  list-style: none;\r\n  z-index: 9;\r\n  display: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LayerEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LayerEdit.vue?vue&type=template&id=173125b2&scoped=true&\"\nimport script from \"./LayerEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./LayerEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LayerEdit.vue?vue&type=style&index=0&id=173125b2&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"173125b2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}